var GameConfig;!function(t){function e(e){return e=e?"&parentid="+e:"","http://"+t.Domain+"?gameid="+t.GameID+e}function n(e,n){return t.IsDebug?"ws://192.168.0.143:9800?GameId="+this.GameID+"&MemberId="+e+"&Device="+this.DeviceType+"&DeviceId="+this.DeviceId+"&Token="+n:"ws://s1.natapp.cc:9111?GameId="+this.GameID+"&MemberId="+e+"&Device="+this.DeviceType+"&DeviceId="+this.DeviceId+"&Token="+n}function i(t,e){return void 0===e&&(e=!0),e?"https://open.weixin.qq.com/connect/oauth2/authorize?appid="+this.AppId+"&redirect_uri=http%3A%2F%2F"+this.Domain+"%3fgameid%3d"+this.GameID+"%26parentid%3d"+t+"&response_type=code&scope=snsapi_base&state={state}#wechat_redirect":"http://"+this.Domain+"?gameid="+this.GameID+"&parentid="+t}function o(t,e){void 0===e&&(e=!0);var n={Title:"射龙门",Desc:"射龙门H5游戏",ImgUrl:"",Link:""};return n.Link=e?"https://open.weixin.qq.com/connect/oauth2/authorize?appid="+this.AppId+"&redirect_uri=http%3A%2F%2F"+this.Domain+"%3fgameid%3d"+this.GameID+"%26parentid%3d"+t+"&response_type=code&scope=snsapi_base&state={state}#wechat_redirect":"http://"+this.Domain+"?gameid="+this.GameID+"&parentid="+t,n}t.GameID=1,t.IsDebug=!1,t.DeviceType="MOBILE",t.DeviceId="123456",t.CacheType=0,t.Domain=t.IsDebug?"www.zyyft.cn":"eg.s1.natapp.cc",t.WebApiBaseUrl=t.IsDebug?"http://192.168.0.143:8200":"http://"+t.Domain+"/api",t.BetWebApiBaseUrl=t.IsDebug?"http://192.168.0.143:8201":"http://"+t.Domain+"/report",t.DesignWidth=1334,t.DesignHeight=750,t.HeightRatio=1,t.WidthRatio=1,t.HeightWidth=1,t.WidthHeight=1,t.RatioType=!0,t.GetDomainUrl=e,t.DebugToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJNZW1iZXJJZCI6NTAsIkRldmljZUlEIjoiMTIzNDU2IiwiRGV2aWNlVHlwZSI6MSwiZXhwIjoxNTE2Nzc3NDk0LCJpYXQiOjE1MTYxNzI2OTR9.o_bo9T4qe_NwqKCxK0YknrQvCoK70jAxqV5-Yj-lJnM",t.GetSocketUrl=n,t.AppId=t.IsDebug?"wxbb5416518880be41":"wxcf3db3f292310c00",t.GetWeChatUrl=i,t.WeChatTitle="",t.WeChatDesc="",t.WeChatImgUrl="",t.GetWeChatShareDto=o}(GameConfig||(GameConfig={}));var InitState=function(){function t(){Laya.init(GameConfig.DesignWidth,GameConfig.DesignHeight,Laya.WebGL),Laya.WorkerLoader.workerPath="libs/worker.js",Laya.WorkerLoader.enable=!0;var t=Laya.Browser.clientHeight>=Laya.Browser.clientWidth?Laya.Browser.clientHeight:Laya.Browser.clientWidth,e=Laya.Browser.clientHeight>=Laya.Browser.clientWidth?Laya.Browser.clientWidth:Laya.Browser.clientHeight;GameConfig.HeightRatio=e/GameConfig.DesignHeight,GameConfig.WidthRatio=t/GameConfig.DesignWidth,GameConfig.HeightWidth=GameConfig.HeightRatio/GameConfig.WidthRatio,GameConfig.WidthHeight=GameConfig.WidthRatio/GameConfig.HeightRatio,GameConfig.RatioType=GameConfig.WidthRatio>GameConfig.HeightRatio?!0:!1,Laya.stage.scaleMode=Laya.Stage.SCALE_EXACTFIT,Laya.stage.alignH=Laya.Stage.ALIGN_CENTER,Laya.stage.alignV=Laya.Stage.ALIGN_MIDDLE,Laya.stage.screenMode=Laya.Stage.SCREEN_HORIZONTAL,Config.isAntialias=!0,Laya.stage.bgColor="#ffffff"}return t}(),Utils;!function(t){var e=function(){function t(){this.wx=Laya.Browser.window.wx}return t.prototype.Init=function(t){this.AppId=GameConfig.AppId,this.wx?this.wx.config({debug:!1,appId:GameConfig.AppId,timestamp:t.Timestamp,nonceStr:t.NonceStr,signature:t.Signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"]}):console.log("未引入weixin.js")},t.prototype.GetNetworkType=function(t){this.wx?this.wx.getNetworkType({success:function(e){if("getNetworkType:fail"==e.errMsg)t.runWith(null);else{var n=e.networkType;t.runWith(n)}}}):console.log("未引入weixin.js")},t.prototype.ShareTimeline=function(t,e,n,i){var o=this;this.wx?this.wx.ready(function(){o.wx.onMenuShareTimeline({title:t,imgUrl:e,link:n,success:function(){i.runWith(1)},cancel:function(){i.runWith(0)}})}):(console.log("未引入weixin.js"),i.runWith(-1))},t.prototype.ShareAppMessage=function(t,e,n,i,o){var r=this;this.wx?this.wx.ready(function(){r.wx.onMenuShareAppMessage({title:t,desc:e,imgUrl:n,link:i,success:function(){o.runWith(1)},cancel:function(){o.runWith(0)}})}):(console.log("未引入weixin.js"),o.runWith(-1))},t.prototype.ShareQQ=function(t,e,n,i,o){var r=this;this.wx?this.wx.ready(function(){r.wx.onMenuShareQQ({title:t,desc:e,imgUrl:n,link:i,success:function(){o.runWith(1)},cancel:function(){o.runWith(0)}})}):(console.log("未引入weixin.js"),o.runWith(-1))},t.prototype.ShareQZone=function(t,e,n,i,o){var r=this;this.wx?this.wx.ready(function(){r.wx.onMenuShareQZone({title:t,desc:e,imgUrl:n,link:i,success:function(){o.runWith(1)},cancel:function(){o.runWith(0)}})}):(console.log("未引入weixin.js"),o.runWith(-1))},t}();t.WeChat=e}(Utils||(Utils={}));var Utils;!function(t){var e;!function(t){t[t.LOCALSTORAGE=0]="LOCALSTORAGE",t[t.COOKIE=1]="COOKIE",t[t.SESSION=2]="SESSION"}(e=t.StorageType||(t.StorageType={}));var n=function(){function t(){}return t.prototype.Set=function(t,n,i,o){switch(void 0===i&&(i=e.LOCALSTORAGE),void 0===o&&(o=7),i){case e.LOCALSTORAGE:this.SetLocalStorage(t,n,o);break;case e.COOKIE:Laya.Browser.window.navigator.cookieEnabled?this.SetCookie(t,n,o):this.SetLocalStorage(t,n,o);break;case e.SESSION:this.SetSessionStorage(t,n,o)}},t.prototype.Get=function(t,n){switch(void 0===n&&(n=e.LOCALSTORAGE),n){case e.LOCALSTORAGE:return this.GetLocalStorage(t);case e.COOKIE:return Laya.Browser.window.navigator.cookieEnabled?this.GetCookie(t):this.GetLocalStorage(t);case e.SESSION:return this.GetSessionStorage(t)}},t.prototype.Del=function(t,n){switch(void 0===n&&(n=e.LOCALSTORAGE),n){case e.LOCALSTORAGE:return this.RemoveLocalStorage(t);case e.COOKIE:return this.DelCookie(t);case e.SESSION:return this.RemoveSessionStorage(t)}},t.prototype.Clear=function(t){switch(void 0===t&&(t=e.LOCALSTORAGE),t){case e.LOCALSTORAGE:return this.ClearLocalStorage();case e.SESSION:return this.ClearSessionStorage()}},t.prototype.SetCookie=function(t,e,n){void 0===n&&(n=7);var i=Laya.Browser.window.document.cookie,o=new Date;i=t+"="+Laya.Browser.window.escape(e)+";expires="+o.toUTCString()+";path=/"},t.prototype.GetCookie=function(t){var e,n=Laya.Browser.window.document.cookie,i=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=n.match(i))?Laya.Browser.window.unescape(e[2]):null},t.prototype.DelCookie=function(t){var e=this.GetCookie(t);null!=e&&this.SetCookie(t,"",-1)},t.prototype.ClearCookie=function(){},t.prototype.SetLocalStorage=function(t,e,n){void 0===n&&(n=null);var i=new Date,o={expires:i.getTime()+24*n*3600*1e3,value:e};Laya.LocalStorage.setItem(t,JSON.stringify(o))},t.prototype.GetLocalStorage=function(t){var e=Laya.LocalStorage.getItem(t);try{var n=JSON.parse(e);if(n.expires){var i=(new Date).getTime();return n.expires>i?n.value:(this.RemoveLocalStorage(t),null)}return n.value}catch(o){return e}},t.prototype.RemoveLocalStorage=function(t){var e=Laya.LocalStorage.getItem(t);null!=e&&Laya.LocalStorage.removeItem(t)},t.prototype.ClearLocalStorage=function(){Laya.LocalStorage.clear()},t.prototype.SetSessionStorage=function(t,e,n){void 0===n&&(n=null);var i=new Date,o={expires:i.getTime()+24*n*3600*1e3,value:e};Laya.Browser.window.sessionStorage.setItem(t,JSON.stringify(o))},t.prototype.GetSessionStorage=function(t){var e=Laya.Browser.window.sessionStorage.getItem(t);try{var n=JSON.parse(e);if(n.expires){var i=(new Date).getTime();return n.expires>i?n.value:(this.RemoveLocalStorage(t),null)}return n.value}catch(o){return e}},t.prototype.RemoveSessionStorage=function(t){Laya.Browser.window.sessionStorage.removeItem(t)},t.prototype.ClearSessionStorage=function(){Laya.Browser.window.sessionStorage.clear()},t}();t.Storage=n}(Utils||(Utils={}));var Utils;!function(t){var e=function(){function t(){}return t.Create=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)})},t}();t.Guid=e}(Utils||(Utils={}));var Utils;!function(t){var e=function(){function t(){this.headers=["Accept","application/json","Content-Type","application/x-www-form-urlencoded","Access-Control-Allow-Origin","*"]}return t.prototype.Request=function(t,e,n,i,o,r,a){void 0===i&&(i=this.headers);var s=new Laya.HttpRequest;s.http.timeout=1e4,s.once(Laya.Event.COMPLETE,this,o),s.once(Laya.Event.ERROR,this,r),s.on(Laya.Event.PROGRESS,this,a),s.send(e,n,t,"json",i)},t.prototype.Post=function(t,e,n,i,o,r){void 0===e&&(e={}),void 0===n&&(n=null),n=this.ObjectToArray(n,this.headers);var a="",s=new Array;if(e){for(var h in e)s.push(h+"="+e[h]);a=s.join("&")}this.Request("post",t,a,n,function(t){i&&i(t)},function(t){o&&o(t)},function(t){r&&r(t)})},t.prototype.Get=function(t,e,n,i,o,r){void 0===e&&(e={}),void 0===n&&(n=null),n=this.ObjectToArray(n,this.headers);var a,s=new Array;if(e){for(var h in e)s.push(h+"="+e[h]);a=s.join("&"),t=t+"?"+a,e=""}this.Request("get",t,e,n,function(t){i&&i(t)},function(t){o&&o(t)},function(t){r&&r(t)})},t.prototype.SetAuthorization=function(t){void 0===t&&(t=""),this.SetKeyValue("Authorization",t,this.headers)},t.prototype.SetHeader=function(t){this.headers=this.ObjectToArray(t,this.headers)},t.prototype.ObjectToArray=function(t,e){if(!t)return e;for(var n in t)t.hasOwnProperty(n)&&(e=this.SetKeyValue(n,t[n],e));return e},t.prototype.SetKeyValue=function(t,e,n){var i=n.indexOf(t);return-1==i?e&&n.push(t,e):null!==e?n.splice(i+1,1,e):n.splice(i,2),n},t}();t.Http=e}(Utils||(Utils={}));var Utils;!function(t){var e;!function(t){var e=function(){function t(t){void 0===t&&(t=!0),this.ResetConnect=t}return t}();t.WebSocketParam=e}(e=t.Socket||(t.Socket={}))}(Utils||(Utils={}));var Utils;!function(t){var e;!function(t){var e=function(){function t(){this.isReConnect=!0,this.reConnectTime=2e3}return t.prototype.Init=function(t){this.OnError=t.OnError,this.OnClosed=t.OnClosed,this.OnConnect=t.OnConnect,this.OnMessage=t.OnMessage,this.OnWillReconnect=t.OnWillReconnect,this.isReConnect=t.ResetConnect},t.prototype.Connect=function(t){this.url=t,this.socket&&this.Close(),this.socket=new Laya.Socket,this.socket.connectByUrl(this.url),this.output=this.socket.output,this.socket.on(Laya.Event.OPEN,this,this.onOpen),this.socket.on(Laya.Event.CLOSE,this,this.onClose),this.socket.on(Laya.Event.MESSAGE,this,this.onMessage),this.socket.on(Laya.Event.ERROR,this,this.onError)},t.prototype.onOpen=function(){Laya.timer.clear(this,this.Connect),this.OnConnect.run()},t.prototype.onClose=function(){this.isReConnect?(this.OnWillReconnect.run(),Laya.timer.once(this.reConnectTime,this,this.Connect,[this.url])):this.OnClosed.run()},t.prototype.onError=function(t){this.OnError.runWith(t.toString())},t.prototype.onMessage=function(t){this.OnMessage.runWith(t)},t.prototype.Close=function(){this.socket&&(this.socket.close(),this.socket.offAll(),this.socket.cleanSocket())},t.prototype.Send=function(t){return this.socket.connected?(this.socket.send(t),!0):!1},t.prototype.SendBinary=function(t){if(this.socket.connected){for(var e=t,n=0;n<e.length;++n)this.output.writeByte(e.charCodeAt(n));this.socket.flush()}},t.prototype.GetConnectState=function(){return this.socket?this.socket.connected:!1},t.prototype.SetNetwork=function(t){this.isReConnect!=t&&(this.isReConnect=t)},t}();t.WebSocket=e}(e=t.Socket||(t.Socket={}))}(Utils||(Utils={}));var BaseEnum;!function(t){var e;!function(t){t[t.MSG_KICKOUT=1]="MSG_KICKOUT",t[t.MSG_ACK=2]="MSG_ACK",t[t.MSG_ERROR=3]="MSG_ERROR",t[t.MSG_SYSTEM_PUSH=4]="MSG_SYSTEM_PUSH",t[t.MSG_GAME=5]="MSG_GAME"}(e=t.MainCommand||(t.MainCommand={}))}(BaseEnum||(BaseEnum={}));var BaseEnum;!function(t){var e;!function(t){t[t.DEFAULT=0]="DEFAULT",t[t.BET=1]="BET",t[t.END=2]="END",t[t.SETTLE=3]="SETTLE"}(e=t.GameStatus||(t.GameStatus={}))}(BaseEnum||(BaseEnum={}));var BaseEnum;!function(t){var e;!function(t){t[t.MSG_GAME_INIT=1]="MSG_GAME_INIT",t[t.MSG_GAME_START=2]="MSG_GAME_START",t[t.MSG_GAME_BET=3]="MSG_GAME_BET",t[t.MSG_GAME_BETRESULT=4]="MSG_GAME_BETRESULT",t[t.MSG_GAME_STOPBET=5]="MSG_GAME_STOPBET",t[t.MSG_GAME_GAMERESULT=6]="MSG_GAME_GAMERESULT",t[t.MSG_GAME_SETTLERESULT=7]="MSG_GAME_SETTLERESULT",t[t.MSG_GAME_OTHER=100]="MSG_GAME_OTHER"}(e=t.GameCommand||(t.GameCommand={}))}(BaseEnum||(BaseEnum={}));var BaseEnum;!function(t){var e;!function(t){t[t.SystemError=0]="SystemError",t[t.Success=1]="Success",t[t.InvalidArgument=2]="InvalidArgument",t[t.MemberExist=1001]="MemberExist",t[t.MemberNotExist=1002]="MemberNotExist",t[t.MemberClosed=1003]="MemberClosed",t[t.NullToken=2001]="NullToken",t[t.OverTime=2002]="OverTime",t[t.TokenInvalid=2003]="TokenInvalid",t[t.TokenDecodeError=2004]="TokenDecodeError",t[t.SignatureError=2005]="SignatureError",t[t.PlayloadError=2006]="PlayloadError",t[t.AccountInvalid=2007]="AccountInvalid",t[t.RefuseTourist=2008]="RefuseTourist",t[t.MemberIdInvalid=2009]="MemberIdInvalid",t[t.AccountExist=3001]="AccountExist",t[t.AccountHasBeenSetup=3002]="AccountHasBeenSetup",t[t.AlreadyAgent=3003]="AlreadyAgent",t[t.EmailExist=3004]="EmailExist",t[t.ErrorPassword=3005]="ErrorPassword",t[t.ParentCanNotBeSelf=3006]="ParentCanNotBeSelf",t[t.PhoneNumberExist=3007]="PhoneNumberExist",t[t.SameEmail=3008]="SameEmail",t[t.SamePassword=3009]="SamePassword",t[t.SamePhoneNumber=3010]="SamePhoneNumber",t[t.WrongEmail=3011]="WrongEmail",t[t.WrongPhoneNumber=3012]="WrongPhoneNumber",t[t.AgencyRelationshipNotExist=3013]="AgencyRelationshipNotExist",t[t.ModifyMemberScoreFailed=3001]="ModifyMemberScoreFailed",t[t.ModifyParentScoreFailed=3002]="ModifyParentScoreFailed"}(e=t.ErrorCode||(t.ErrorCode={}))}(BaseEnum||(BaseEnum={}));var BaseEnum;!function(t){var e;!function(t){t[t.SUCCESS=0]="SUCCESS",t[t.ODDS_ERROR=1]="ODDS_ERROR",t[t.AMOUNT_ERROR=2]="AMOUNT_ERROR",t[t.BALANCE_SMALL=3]="BALANCE_SMALL",t[t.BETPOS_ERROR=4]="BETPOS_ERROR",t[t.NOTBET_STATUS=5]="NOTBET_STATUS",t[t.OVER_LIMIT=6]="OVER_LIMIT"}(e=t.BetErrorCode||(t.BetErrorCode={}))}(BaseEnum||(BaseEnum={}));var BaseDto;!function(t){var e=function(){function t(){}return t}();t.MessageDto=e;var n=function(){function t(){}return t}();t.GameMessageDto=n}(BaseDto||(BaseDto={}));var BaseDto;!function(t){var e=function(){function t(){this.Nickname="",this.Score=null,this.HeadImageUrl=""}return t}();t.MemberInfoDto=e}(BaseDto||(BaseDto={}));var BaseDto;!function(t){var e=function(){function t(){this.DeviceId="123456",this.DeviceType="MOBILE"}return t}();t.LoginDto=e;var n=function(){function t(){this.Score=null}return t}();t.LoginSuccessDto=n;var i=function(){function t(){}return t}();t.LoginMultiAccountDto=i;var o;!function(t){t[t.ERROR=0]="ERROR",t[t.LOGIN=1]="LOGIN",t[t.MULTI=2]="MULTI",t[t.NO=3]="NO"}(o=t.ResultEnum||(t.ResultEnum={}));var r=function(){function t(){}return t}();t.LoginResultDto=r}(BaseDto||(BaseDto={}));var BaseDto;!function(t){var e=function(){function t(){}return t}();t.WeChatSignatureDto=e;var n=function(){function t(){this.Title="",this.ImgUrl="",this.Desc="",this.Link=null}return t}();t.WeChatShareDto=n}(BaseDto||(BaseDto={}));var BaseDto;!function(t){var e=function(){function t(){this.Token="",this.SocketToken="",this.Code=null,this.IsClose=!0,this.IsMulti=!1,this.IsTourists=!0}return t}();t.AuthorizationDto=e}(BaseDto||(BaseDto={}));var BaseCache;!function(){}(BaseCache||(BaseCache={}));var BaseCache;!function(){}(BaseCache||(BaseCache={}));var BaseCache;!function(t){var e=function(){function t(){this.authorization=null,this.cacheType=void 0!==GameConfig.CacheType?GameConfig.CacheType:Utils.StorageType.LOCALSTORAGE}return t.prototype.GetAuthorizationKey=function(t){return"Authorization-"+t+"-CacheKey"},t.prototype.GetAuthorization=function(t){if(this.authorization)return this.authorization;var e=new Utils.Storage,n=this.GetAuthorizationKey(t);return this.authorization=e.Get(n,this.cacheType),this.authorization},t.prototype.SetAuthorization=function(t,e,n){this.authorization||(this.authorization=new BaseDto.AuthorizationDto),this.authorization.Code=void 0!==e.Code?e.Code:this.authorization.Code,this.authorization.Token=void 0!==e.Token?e.Token:this.authorization.Token,this.authorization.SocketToken=void 0!==e.SocketToken?e.SocketToken:this.authorization.SocketToken,this.authorization.IsMulti=void 0!==e.IsMulti?e.IsMulti:this.authorization.IsMulti,this.authorization.IsClose=void 0!==e.IsClose?e.IsClose:this.authorization.IsClose,this.authorization.IsTourists=void 0!==e.IsTourists?e.IsTourists:this.authorization.IsTourists,this.authorization.Accounts=void 0!==e.Accounts?e.Accounts:this.authorization.Accounts;var i=new Utils.Storage,o=this.GetAuthorizationKey(t);return i.Set(o,this.authorization,this.cacheType,n),!0},t.instance=new t,t}();t.Authorization=e}(BaseCache||(BaseCache={}));var BaseCache;!function(t){var e=function(){function t(){this.memberInfo=null,this.cacheType=void 0!==GameConfig.CacheType?GameConfig.CacheType:Utils.StorageType.LOCALSTORAGE}return t.prototype.GetMemberInfoKey=function(t){return"UserInfo-"+t+"-CacheKey"},t.prototype.GetMemberInfo=function(t){if(this.memberInfo)return this.memberInfo;var e=new Utils.Storage,n=this.GetMemberInfoKey(t);return this.memberInfo=e.Get(n,this.cacheType),this.memberInfo},t.prototype.SetMemberInfo=function(t,e,n){this.memberInfo||(this.memberInfo=new BaseDto.MemberInfoDto),this.memberInfo.Account=void 0!==e.Account?e.Account:this.memberInfo.Account,this.memberInfo.HeadImageUrl=void 0!==e.HeadImageUrl?e.HeadImageUrl:this.memberInfo.HeadImageUrl,this.memberInfo.Nickname=void 0!==e.Nickname?e.Nickname:this.memberInfo.Nickname,this.memberInfo.Score=void 0!==e.Score?e.Score:this.memberInfo.Score,this.memberInfo.MemberId=void 0!==e.MemberId?e.MemberId:this.memberInfo.MemberId;var i=new Utils.Storage,o=this.GetMemberInfoKey(t);return i.Set(o,this.memberInfo,this.cacheType,n),!0},t.instance=new t,t}();t.MemberInfo=e}(BaseCache||(BaseCache={}));var ServiceManager;!function(t){var e;!function(t){t.OnConnect="OnConnectEvent",t.OnClose="OnCloseEvent",t.OnError="OnErrorEvent",t.OnWillReconnect="OnWillReconnectEvent",t.OnGame="OnGameEvent",t.OnLogout="OnLogoutEvent",t.OnSystemPush="OnSystemPushEvent",t.OnAck="OnAckEvent"}(e=t.SocketEvent||(t.SocketEvent={}))}(ServiceManager||(ServiceManager={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ServiceManager;!function(t){var e=function(e){function n(){var t=e.call(this)||this;t.socket=new Utils.Socket.WebSocket;var n=new Utils.Socket.WebSocketParam;return n.OnConnect=Laya.Handler.create(t,t.OnConnect,null,!1),n.OnError=Laya.Handler.create(t,t.OnError,null,!1),n.OnClosed=Laya.Handler.create(t,t.OnClosed,null,!1),n.OnMessage=Laya.Handler.create(t,t.OnMessage,null,!1),n.OnWillReconnect=Laya.Handler.create(t,t.OnWillReconnect,null,!1),t.socket.Init(n),t}return __extends(n,e),n.prototype.SetNetwork=function(t){this.socket.SetNetwork(t)},n.prototype.Connect=function(t){this.socket.Connect(t)},n.prototype.Close=function(){this.socket.Close()},n.prototype.Send=function(t,e){void 0===t&&(t=null),void 0===e&&(e=Utils.Guid.Create());var n=new BaseDto.GameMessageDto;n.Command=BaseEnum.GameCommand.MSG_GAME_BET,n.Data=t;var i=new BaseDto.MessageDto;i.MSGID=e,i.Command=BaseEnum.MainCommand.MSG_GAME,i.Data=n;var o=JSON.stringify(i);return this.socket.Send(o),i.MSGID},n.prototype.OnConnect=function(){this.event(t.SocketEvent.OnConnect)},n.prototype.OnClosed=function(){this.event(t.SocketEvent.OnClose)},n.prototype.OnError=function(e){this.event(t.SocketEvent.OnError,e)},n.prototype.OnWillReconnect=function(){this.event(t.SocketEvent.OnWillReconnect)},n.prototype.OnMessage=function(e){if(e){var n;try{n=JSON.parse(e)}catch(i){return}switch(n.Command){case BaseEnum.MainCommand.MSG_ACK:this.event(t.SocketEvent.OnAck,n.Data);break;case BaseEnum.MainCommand.MSG_GAME:this.event(t.SocketEvent.OnGame,n.Data);break;case BaseEnum.MainCommand.MSG_ERROR:this.event(t.SocketEvent.OnError,n.Data);break;case BaseEnum.MainCommand.MSG_KICKOUT:this.socket.Close(),this.event(t.SocketEvent.OnLogout);break;case BaseEnum.MainCommand.MSG_SYSTEM_PUSH:this.event(t.SocketEvent.OnSystemPush,n.Data)}}},n}(Laya.EventDispatcher);t.SocketManager=e}(ServiceManager||(ServiceManager={}));var ServiceManager;!function(t){var e=function(){function t(t){this.gameID=t}return t.prototype.LoginError=function(){},t.prototype.Logout=function(){return BaseCache.Authorization.instance.SetAuthorization(this.gameID,null),!0},t.prototype.GetSocketInfo=function(){var t=BaseCache.Authorization.instance.GetAuthorization(this.gameID);return null==t&&(t=new BaseDto.AuthorizationDto),t},t.prototype.GetMemberInfo=function(){var t=BaseCache.MemberInfo.instance.GetMemberInfo(GameConfig.GameID);return t},t.prototype.LoginByTourists=function(t,e,n,i){var o=this,r={Authorization:e},a={DeviceType:t.DeviceType,DeviceId:t.DeviceId},s=new Utils.Http;s.Post(Net.ApiConfig.LoginByTourists,a,r,function(t){t.Result==BaseEnum.ErrorCode.Success?(o.LoginSuccess(t.Data,n),n.runWith(t.Data)):i.runWith(t.Result)},function(t){i.runWith(t.toString())})},t.prototype.LoginSuccess=function(t,e){var n=new BaseDto.AuthorizationDto;n.Token=t.SessionToken,n.SocketToken=t.SocketToken,n.IsMulti=!1,n.IsClose=t.Closed,n.IsTourists=!0,BaseCache.Authorization.instance.SetAuthorization(this.gameID,n,1/150);var i=(new BaseDto.LoginResultDto,new BaseDto.MemberInfoDto);i.MemberId=t.MemberId,i.Score=t.Score,BaseCache.MemberInfo.instance.SetMemberInfo(this.gameID,i,1/150),e.run()},t.prototype.SetMemberMoney=function(t){var e=new BaseDto.MemberInfoDto;e.Score=t.toString(),BaseCache.MemberInfo.instance.SetMemberInfo(this.gameID,e)},t.prototype.GetJsSignature=function(t,e){var n={Url:t},i=new Utils.Http;i.Post(Net.ApiConfig.GetJsSignature,n,null,function(t){console.log("GetWeChatParams成功回调"),t.Result==BaseEnum.ErrorCode.Success?e.runWith(t.Data):console.log("获取微信配置信息失败",t.Result)},function(t){console.log("获取微信配置信息失败",t)})},t}();t.MemberManager=e}(ServiceManager||(ServiceManager={}));var WebApiBaseCtrl=function(){function t(t){this.header={Authorization:""},this.http=new Utils.Http,this.gameID=t}return t.prototype.SetToken=function(t){if(t)return this.header.Authorization=t,void 0;var e=new ServiceManager.MemberManager(this.gameID),n=e.GetSocketInfo();this.header.Authorization=n.Token},t}(),BaseCtrl=function(){function t(t){var e=this;this.gameID=t,this.parentID=Utils.Url.GetQuery("parentID");var n=new ServiceManager.MemberManager(this.gameID);this.authorizationInfo=n.GetSocketInfo(),this.memberInfo=n.GetMemberInfo();var i=null!=this.memberInfo?this.memberInfo.MemberId:0,o=GameConfig.GetSocketUrl(i,this.authorizationInfo.SocketToken);this.socket=new ServiceManager.SocketManager,this.socket.on(ServiceManager.SocketEvent.OnConnect,this,this.OnConnectHandler),this.socket.on(ServiceManager.SocketEvent.OnClose,this,this.OnCloseHandler),this.socket.on(ServiceManager.SocketEvent.OnError,this,this.OnErrorHandler),this.socket.on(ServiceManager.SocketEvent.OnWillReconnect,this,this.OnWillReconnectHandler),this.socket.on(ServiceManager.SocketEvent.OnGame,this,this.OnMessageHandler),this.socket.on(ServiceManager.SocketEvent.OnLogout,this,this.OnLogoutHandler),this.socket.on(ServiceManager.SocketEvent.OnAck,this,this.OnAckHandler),this.socket.on(ServiceManager.SocketEvent.OnSystemPush,this,this.OnSystemPushHandler),this.socket.Connect(o);var r=new Utils.WeChat;Laya.timer.loop(2e3,this,function(){r.GetNetworkType(Laya.Handler.create(e,e.GetNetworkSuccess,null,!1))});var a=Laya.Handler.create(this,this.WeChatShareHandler,null,!1),s=GameConfig.GetWeChatShareDto(this.parentID,!0);r.ShareAppMessage(s.Title,s.Desc,s.ImgUrl,s.Link,a),r.ShareQQ(s.Title,s.Desc,s.ImgUrl,s.Link,a);var h=GameConfig.GetWeChatShareDto(this.parentID,!1);r.ShareTimeline(h.Title,h.ImgUrl,h.Link,a),r.ShareQZone(h.Title,h.Desc,h.ImgUrl,h.Link,a)}return t.prototype.GetNetworkSuccess=function(t){t?this.socket.SetNetwork(!0):this.socket.SetNetwork(!1),this.OnNoNetwork()},t.prototype.Send=function(t,e){void 0===e&&(e=Utils.Guid.Create()),this.socket.Send(t,e)},t.prototype.OnMessageHandler=function(t){switch(t.Command){case BaseEnum.GameCommand.MSG_GAME_INIT:this.OnGameInit(t.Data);break;case BaseEnum.GameCommand.MSG_GAME_START:this.OnGameStart(t.Data);break;case BaseEnum.GameCommand.MSG_GAME_BETRESULT:this.OnBetResult(t.Data);break;case BaseEnum.GameCommand.MSG_GAME_STOPBET:this.OnStopBet();break;case BaseEnum.GameCommand.MSG_GAME_GAMERESULT:this.OnGameResult(t.Data);break;case BaseEnum.GameCommand.MSG_GAME_SETTLERESULT:this.OnSettleResult(t.Data);break;case BaseEnum.GameCommand.MSG_GAME_OTHER:this.OnGameOther(t.Data)}},t}(),Utils;!function(t){var e=function(){function t(){}return t.GetQuery=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),n=Laya.Browser.window.location.search.substr(1).match(e);return null!=n?Laya.Browser.window.unescape(n[2]):null},t}();t.Url=e}(Utils||(Utils={}));var Utils;!function(t){var e=function(){function t(){}return t.Get=function(t,e){return Math.round(Math.random()*(e-t)+t)},t}();t.Random=e}(Utils||(Utils={}));var Utils;!function(t){var e=function(){function t(){}return t.GetCardColor=function(t){return(t-1)/13},t.GetNumber=function(t){var e=(t-1)%13;return e++,e},t}();t.Poker=e}(Utils||(Utils={}));var Utils;!function(t){var e=function(){function e(){}return e.GetHeightByTime=function(e,n,i){var o=t.Float.Mul(e,n),r=t.Float.Mul(i,n),a=t.Float.Mul(r,n),s=t.Float.Div(a,2);return t.Float.Add(o,s)},e.GetSpeed=function(e,n,i){var o=t.Float.Mul(n,i);return t.Float.Add(e,o)},e.GetFrame=function(e,n,i){var o=t.Float.Sub(n,e);return t.Float.Div(o,i)},e}();t.Physical=e}(Utils||(Utils={}));var Utils;!function(t){var e=function(){function t(){}return t.Add=function(t,e){var n=void 0,i=void 0,o=void 0;try{n=t.toString().split(".")[1].length}catch(r){n=0}try{i=e.toString().split(".")[1].length}catch(r){i=0}return o=Math.pow(10,Math.max(n,i)),(this.Mul(t,o)+this.Mul(e,o))/o},t.Sub=function(t,e){var n=void 0,i=void 0,o=void 0;try{n=t.toString().split(".")[1].length}catch(r){n=0}try{i=e.toString().split(".")[1].length}catch(r){i=0}return o=Math.pow(10,Math.max(n,i)),(this.Mul(t,o)-this.Mul(e,o))/o},t.Mul=function(t,e){var n=0,i=t.toString(),o=e.toString();try{n+=i.split(".")[1].length}catch(r){}try{n+=o.split(".")[1].length}catch(r){}return Number(i.replace(".",""))*Number(o.replace(".",""))/Math.pow(10,n)},t.Div=function(t,e){var n=void 0,i=void 0,o=0,r=0;try{o=t.toString().split(".")[1].length}catch(a){}try{r=e.toString().split(".")[1].length}catch(a){}return n=Number(t.toString().replace(".","")),i=Number(e.toString().replace(".","")),this.Mul(n/i,Math.pow(10,r-o))},t}();t.Float=e}(Utils||(Utils={}));var Utils;!function(t){var e=function(){function t(){}return t.PlayMisic=function(t){Laya.SoundManager.playMusic(t)},t.StopMisic=function(){Laya.SoundManager.stopMusic()},t.PlaySounds=function(t){Laya.SoundManager.playSound(t)},t}();t.BackgroundMusic=e}(Utils||(Utils={}));var Utils;!function(t){var e=function(){function t(){}return t.ScaleHeight=function(t,e,n,i){var o=t/n,r=e/i;return r/o},t.ScaleWidth=function(t,e,n,i){var o=t/n,r=e/i;return o/r},t.ScaleX=function(t,e,n,i){var o=n*i/e;return t*o},t.ScaleY=function(t,e,n,i){var o=n*i/e;return t*o},t}();t.Scale=e}(Utils||(Utils={}));var Utils;!function(t){var e=function(){function t(){}return t.Format=function(t,e,n,i,o){t=t||0,e=isNaN(e=Math.abs(e))?2:e,n=void 0!==n?n:"",i=i||",",o=o||".";var r=0>t?"-":"",a=parseInt(t=Math.abs(+t||0).toFixed(e),10)+"",s=0;return s=(s=a.length)>3?s%3:0,n+r+(s?a.substr(0,s)+i:"")+a.substr(s).replace(/(\d{3})(?=\d)/g,"$1"+i)+(e?o+Math.abs(t-a).toFixed(e).slice(2):"")},t}();t.Money=e}(Utils||(Utils={}));var Utils;!function(t){var e=function(){function t(){}return t.transform=function(t,e){var n,i;i="string"==typeof t?t:t.toString();var o=new RegExp("\\-","gi");i=i.replace(o,"/");var r=new Date(i);if(0==e){var a=r.getFullYear(),s=r.getMonth()+1,h=r.getDate();n=a+"/"+s+"/"+h}if(1==e){var l=r.getHours(),c=r.getMinutes(),u=r.getSeconds();l=10>l?"0"+l:l,c=10>c?"0"+c:c,u=10>u?"0"+u:u,n=l+":"+c+":"+u}return n},t}();t.Time=e}(Utils||(Utils={}));var Utils;!function(t){var e=function(){function t(){}return t.transform=function(t){var e;return t==Enum.BetPosType.IN&&(e="射进"),t==Enum.BetPosType.OUT&&(e="射偏"),t==Enum.BetPosType.HIT&&(e="撞柱"),t==Enum.BetPosType.BIG&&(e="大"),t==Enum.BetPosType.SMALL&&(e="小"),t==Enum.BetPosType.ODD&&(e="单"),t==Enum.BetPosType.EVEN&&(e="双"),t==Enum.BetPosType.RED&&(e="红"),t==Enum.BetPosType.BLACK&&(e="黑"),t==Enum.BetPosType.LOUT&&(e="左偏"),t==Enum.BetPosType.ROUT&&(e="右偏"),t==Enum.BetPosType.LHIT&&(e="左撞柱"),t==Enum.BetPosType.RHIT&&(e="右撞柱"),e},t}();t.BetPos=e}(Utils||(Utils={}));var LanguageUtils;!function(t){var e=function(){function e(){this.CurrentLangue=null}return e.prototype.SetLanguage=function(t,e){void 0===e&&(e=0);var n=new Utils.Storage,i=this.GetLanguageKey(e);return n.SetLocalStorage(i,t),this.CurrentLangue=t,!0},e.prototype.GetLanguage=function(e,n){if(void 0===n&&(n=0),null===this.CurrentLangue){var i=new Utils.Storage,o=this.GetLanguageKey(t.GameID),r=i.GetLocalStorage(o);this.CurrentLangue=r?r:t.DefaultLanguage}return t[t.LanguageType[this.CurrentLangue]][e]},e.prototype.GetLanguageKey=function(t){return void 0===t&&(t=0),"EGame-"+t+"-Language-Key"},e}();t.Language=e}(LanguageUtils||(LanguageUtils={}));var LanguageUtils;!function(t){t.EN={"in":"IN",out:"OUT",hit:"HIT",red:"Red",black:"Black",big:"Big",small:"Small",odd:"Odd",even:"Even",betSuccess:"Bet-Success",betFail:"Bet-Fail",gameSuccess:"Guess-Success",gameFail:"再接再厉0",SUCCESS:"成功",ODDS_ERROR:"赔率错误",AMOUNT_ERROR:"金额错误",BALANCE_SMALL:"余额不足",BETPOS_ERROR:"投注位置错误",NOTBET_STATUS:"不在投注状态",OVER_LIMIT:"超过限额"}}(LanguageUtils||(LanguageUtils={}));var LanguageUtils;!function(t){var e;!function(t){t[t.CH=0]="CH",t[t.EN=1]="EN"}(e=t.LanguageType||(t.LanguageType={})),t.DefaultLanguage=e.CH,t.GameID=GameConfig.GameID}(LanguageUtils||(LanguageUtils={}));var LanguageUtils;!function(t){t.CH={"in":"射进",out:"射偏",hit:"撞柱",red:"红",black:"黑",big:"大",small:"小",odd:"单",even:"双",lout:"左",rout:"右",lhit:"左",rhit:"右",betSuccess:"投注成功",betFail:"投注失败",gameSuccess:"有猜中哦",gameFail:"再接再厉0",SUCCESS:"成功",ODDS_ERROR:"赔率错误",AMOUNT_ERROR:"金额错误",BALANCE_SMALL:"余额不足",BETPOS_ERROR:"投注位置错误",NOTBET_STATUS:"不在投注状态",OVER_LIMIT:"超过限额"}}(LanguageUtils||(LanguageUtils={}));var Enum;!function(t){var e;!function(t){t[t.BLACK=0]="BLACK",t[t.RED=1]="RED",t[t.PLUM=2]="PLUM",t[t.SQUARD=3]="SQUARD"}(e=t.CardColor||(t.CardColor={}))}(Enum||(Enum={}));var Enum;!function(t){var e;!function(t){t[t.IN=1]="IN",t[t.OUT=2]="OUT",t[t.HIT=3]="HIT",t[t.BIG=4]="BIG",t[t.SMALL=5]="SMALL",t[t.ODD=6]="ODD",t[t.EVEN=7]="EVEN",t[t.RED=8]="RED",t[t.BLACK=9]="BLACK",t[t.LOUT=10]="LOUT",t[t.ROUT=11]="ROUT",t[t.LHIT=12]="LHIT",t[t.RHIT=13]="RHIT"}(e=t.BetPosType||(t.BetPosType={}))}(Enum||(Enum={}));var Enum;!function(t){var e;!function(t){t[t.INVALID=0]="INVALID",t[t.DRAW=1]="DRAW",t[t.WIN=2]="WIN",t[t.LOSE=3]="LOSE",t[t.WIN_HALF=4]="WIN_HALF",t[t.LOSE_HALF=5]="LOSE_HALF"}(e=t.BetResult||(t.BetResult={}))}(Enum||(Enum={}));var Dto;!function(t){var e=function(){function t(){}return t}();t.StartGameDto=e}(Dto||(Dto={}));var Dto;!function(t){var e=function(){function t(){}return t}();t.HandlerDto=e}(Dto||(Dto={}));var Dto;!function(t){var e=function(){function t(){}return t}();t.SendBetDto=e}(Dto||(Dto={}));var Dto;!function(t){var e=function(){function t(){}return t}();t.LimitDto=e;var n=function(){function t(){}return t}();t.HistoryRoundDto=n;var i=function(){function t(){}return t}();t.GameResultDto=i;var o=function(){function t(){}return t}();t.CardInfoDto=o;var r=function(){function t(){}return t}();t.InitGameDto=r}(Dto||(Dto={}));var Dto;!function(t){var e=function(){function t(){}return t}();t.BetResultDto=e}(Dto||(Dto={}));var Dto;!function(t){var e=function(){function t(){}return t}();t.BetDto=e}(Dto||(Dto={}));var Dto;!function(t){var e=function(){function t(){this.LastId=null,this.PageSize=20}return t}();t.BetRecordPageDto=e}(Dto||(Dto={}));var Dto;!function(t){var e=function(){function t(){}return t
}();t.NoteRecordDto=e}(Dto||(Dto={}));var TimeEffect=function(){function t(t){this.timeUI=t}return t.prototype.GameTimeUI=function(t){for(var e={},n=t,i=1;i>=0;i--)e["item"+i]={index:Math.floor(n%10)},n/=10;this.timeUI.dataSource=e},t.prototype.SetGameTime=function(){this.gameTime--,this.gameTime<=0&&this.EndGameTime(),this.GameTimeUI(this.gameTime)},t.prototype.StartGameTime=function(t){this.gameTime=t,this.GameTimeUI(this.gameTime),Laya.timer.loop(1e3,this,this.SetGameTime)},t.prototype.EndGameTime=function(){Laya.timer.clear(this,this.SetGameTime),this.gameTime=0,this.GameTimeUI(this.gameTime)},t}(),PokerEffect=function(){function t(t){this.pokerBgUrl="ui/poker/pkbg.png",this.poker=t,this.upY=this.poker.y,this.downY=-500,this.Reset()}return t.prototype.GetPokerUrl=function(t){return"ui/poker/"+t+".png"},t.prototype.Reset=function(){this.isActive=!1,this.poker.visible=!1,this.poker.scaleX=-1,this.poker.skin=this.pokerBgUrl},t.prototype.InitPoker=function(t){this.isActive=!0,this.poker.visible=!0,t?(this.poker.skin=this.GetPokerUrl(t),this.poker.scaleX=1):this.poker.skin=this.pokerBgUrl},t.prototype.ShowPoker=function(t){this.isActive||(this.isActive=!0,this.poker.visible=!0,this.poker.y=this.downY,Laya.Tween.to(this.poker,{y:this.upY},1e3,Laya.Ease.backOut,Laya.Handler.create(this,this.StartFlipPoker,[t],!1)))},t.prototype.StartFlipPoker=function(t){t&&(this.type=t,this.poker.scaleX=-1,Laya.Tween.to(this.poker,{scaleX:0},1e3,Laya.Ease.circIn,Laya.Handler.create(this,this.EndFlipPoker)))},t.prototype.EndFlipPoker=function(){this.poker.skin=this.GetPokerUrl(this.type),Laya.Tween.to(this.poker,{scaleX:1},1e3,Laya.Ease.circOut)},t.prototype.HidePoker=function(){this.Reset()},t}(),NumberGradualChangeEffect=function(){function t(t){this.result=0,this.showText=0,this.count=10,this.changedCount=1,this.txt=t,this.result=this.MoneyToNumber(this.txt.text)}return t.prototype.MoneyToNumber=function(t){if(-1==t.indexOf(","))return Number(t);var e=t.split(",").join("");return Number(e)},t.prototype.initCounter=function(t){this.changedCount=1,this.result+=t,this.cardinalNumber=Number(((this.result-this.showText)/this.count).toFixed(2)),this.allCount=0===this.cardinalNumber?0:Number(((this.result-this.showText)/this.cardinalNumber).toFixed(2)),this.remainder=this.result-this.cardinalNumber*this.allCount},t.prototype.start=function(t){Laya.timer.clear(this,this.onLoop),this.showText=this.MoneyToNumber(this.txt.text),this.result=this.MoneyToNumber(this.txt.text),t=Number(t),t-=this.result,this.initCounter(t),Laya.timer.loop(100,this,this.onLoop)},t.prototype.onLoop=function(){this.showText=this.showText-0+this.cardinalNumber;var t=Utils.Money.Format(this.showText);this.txt.changeText(t),this.changedCount+=1,this.changedCount>this.allCount&&this.end()},t.prototype.end=function(){var t=Utils.Money.Format(this.result);this.txt.changeText(t),Laya.timer.clear(this,this.onLoop)},t}(),FlyIntoTweenEffect=function(){function t(){}return t.prototype.FlyInto=function(t,e,n,i,o,r){void 0===o&&(o="100"),this.changeEffect=r,this.text=Laya.Pool.getItemByClass("text",Laya.Text),Laya.stage.addChild(this.text),this.text.color="blue",this.text.fontSize=40,this.x2=n,this.y2=i,this.text.text=o,this.text.pos(t,e),this.Tween(this.callback)},t.prototype.Tween=function(t){Laya.Tween.to(this.text,{x:this.x2,y:this.y2,alpha:1},200,Laya.Ease.cubicInOut,Laya.Handler.create(this,t))},t.prototype.callback=function(){this.text.removeSelf(),Laya.Pool.recover("text",this.text),this.changeEffect.start(Number(this.text.text)),Laya.Pool.recover("tweens",this)},t}(),CutScreen=function(){function t(){}return t.prototype.CutScreen=function(t,e,n,i,o,r){var a=t.drawToCanvas(e,n,i,o),s=new Laya.Texture(a);this.sp=new Laya.Sprite,this.sp.graphics.drawTexture(s,0,0,e,n),Laya.stage.addChild(this.sp),r&&r.run(),Laya.timer.once(500,this,this.FlyTo,[this.sp])},t.prototype.FlyTo=function(t){Laya.Tween.to(t,{x:20,y:120,scaleX:.2,scaleY:.2},2e3,Laya.Ease.backIn,Laya.Handler.create(this,this.FlyOver))},t.prototype.FlyOver=function(){},t}(),Net;!function(t){var e;!function(t){t.GetBetRecord=GameConfig.BetWebApiBaseUrl+"/Bet/GetBetRecord",t.LoginByTourists=GameConfig.WebApiBaseUrl+"/Member/DemoAccountLogin",t.GetJsSignature=GameConfig.WebApiBaseUrl+"/WeChat/GetJsSignature"}(e=t.ApiConfig||(t.ApiConfig={}))}(Net||(Net={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Net;!function(t){var e=function(e){function n(){return e.call(this,GameConfig.GameID)||this}return __extends(n,e),n.GetInstance=function(){return this.instance||(this.instance=new n,this.instance.SetToken()),this.instance},n.prototype.GetBetRecord=function(e,n,i){this.http.Post(t.ApiConfig.GetBetRecord,e,this.header,function(t){if(t.Result==BaseEnum.ErrorCode.Success){var e=new Dto.HandlerDto;e.Data=t.Data,n.runWith(e)}else i.runWith(t.ErrorCode)},function(t){i.runWith(t.toString())})},n}(WebApiBaseCtrl);t.WebApi=e}(Net||(Net={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),View=laya.ui.View,Dialog=laya.ui.Dialog,ui;!function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.BetPanelUI.uiView)},n.uiView={type:"View",props:{y:0,x:0,width:1334,height:750},child:[{type:"Image",props:{width:1335,"var":"BetBox",skin:"ui/bg_bet.png",height:252,centerX:0,bottom:0},child:[{type:"Box",props:{y:22,x:627,width:133,visible:!0,name:"IN",height:130},child:[{type:"Label",props:{y:20,x:36,width:60,valign:"middle",text:"射进",height:40,fontSize:28,color:"#faf114",align:"center"}},{type:"Label",props:{y:60,x:36,width:60,valign:"middle",text:"---",height:40,fontSize:28,color:"#faf114",align:"center"}},{type:"Button",props:{y:32,x:66,visible:!1,stateNum:1,skin:"ui/btn_chip.png",labelSize:20,label:"0",anchorY:.5,anchorX:.5}}]},{type:"Box",props:{y:22,x:281,width:346,name:"OUT",height:65},child:[{type:"Label",props:{y:12,x:95,width:60,valign:"middle",text:"射偏",height:40,fontSize:28,color:"#faf114",align:"center"}},{type:"Label",props:{y:12,x:175,width:60,valign:"middle",text:"---",height:40,fontSize:28,color:"#faf114",align:"center"}},{type:"Button",props:{y:32,x:120,visible:!1,stateNum:1,skin:"ui/btn_chip.png",labelSize:20,label:"0",anchorY:.5,anchorX:.5}}]},{type:"Box",props:{y:22,x:761,width:346,name:"HIT",height:65},child:[{type:"Label",props:{y:12,x:95,width:60,valign:"middle",text:"撞柱",height:40,fontSize:28,color:"#faf114",align:"center"}},{type:"Label",props:{y:12,x:175,width:60,valign:"middle",text:"---",height:40,fontSize:28,color:"#faf114",align:"center"}},{type:"Button",props:{y:32,x:120,visible:!1,stateNum:1,skin:"ui/btn_chip.png",labelSize:20,label:"0",anchorY:.5,anchorX:.5}}]},{type:"Box",props:{y:156,x:556,width:132,name:"BIG",height:95},child:[{type:"Label",props:{y:10,width:60,valign:"middle",text:"大:",height:40,fontSize:24,color:"#ffbf66",centerX:0,align:"center"}},{type:"Label",props:{y:50,width:60,valign:"middle",text:"---",height:30,fontSize:24,color:"#ffbf66",centerX:0,align:"center"}},{type:"Button",props:{y:47,x:66,visible:!1,stateNum:1,skin:"ui/btn_chip.png",labelSize:20,label:"0",anchorY:.5,anchorX:.5}}]},{type:"Box",props:{y:156,x:692,width:132,name:"SMALL",height:95},child:[{type:"Label",props:{y:10,width:60,valign:"middle",text:"小:",height:40,fontSize:24,color:"#66fcff",centerX:0,align:"center"}},{type:"Label",props:{y:50,width:60,valign:"middle",text:"---",height:30,fontSize:24,color:"#66fcff",centerX:0,align:"center"}},{type:"Button",props:{y:47,x:66,visible:!1,stateNum:1,skin:"ui/btn_chip.png",labelSize:20,label:"0",anchorY:.5,anchorX:.5}}]},{type:"Box",props:{y:156,x:832,width:132,name:"ODD",height:95},child:[{type:"Label",props:{y:10,width:60,valign:"middle",text:"单:",height:40,fontSize:24,color:"#ffbf66",centerX:0,align:"center"}},{type:"Label",props:{y:50,width:60,valign:"middle",text:"---",height:30,fontSize:24,color:"#ffbf66",centerX:0,align:"center"}},{type:"Button",props:{y:47,x:66,visible:!1,stateNum:1,skin:"ui/btn_chip.png",labelSize:20,label:"0",anchorY:.5,anchorX:.5}}]},{type:"Box",props:{y:156,x:968,width:148,name:"EVEN",height:95},child:[{type:"Label",props:{y:10,width:60,valign:"middle",text:"双:",height:40,fontSize:24,color:"#66fcff",centerX:0,align:"center"}},{type:"Label",props:{y:50,width:60,valign:"middle",text:"---",height:30,fontSize:24,color:"#66fcff",centerX:0,align:"center"}},{type:"Button",props:{y:47,x:74,visible:!1,stateNum:1,skin:"ui/btn_chip.png",labelSize:20,label:"0",anchorY:.5,anchorX:.5}}]},{type:"Box",props:{y:157,x:268,width:148,name:"RED",height:95},child:[{type:"Label",props:{y:10,width:60,valign:"middle",text:"红:",height:40,fontSize:24,color:"#ffbf66",centerX:0,align:"center"}},{type:"Label",props:{y:50,width:60,valign:"middle",text:"---",height:30,fontSize:24,color:"#ffbf66",centerX:0,align:"center"}},{type:"Button",props:{y:47,x:74,visible:!1,stateNum:1,skin:"ui/btn_chip.png",labelSize:20,label:"0",anchorY:.5,anchorX:.5}}]},{type:"Box",props:{y:156,x:420,width:132,name:"BLACK",height:95},child:[{type:"Label",props:{y:10,width:60,valign:"middle",text:"黑:",height:40,fontSize:24,color:"#66fcff",centerX:0,align:"center"}},{type:"Label",props:{y:50,width:60,valign:"middle",text:"---",height:30,fontSize:24,color:"#66fcff",centerX:0,align:"center"}},{type:"Button",props:{y:47,x:66,visible:!1,stateNum:1,skin:"ui/btn_chip.png",labelSize:20,label:"0",anchorY:.5,anchorX:.5}}]},{type:"Box",props:{y:90,x:279,width:173,name:"LOUT",height:65},child:[{type:"Label",props:{y:12,x:25,width:60,valign:"middle",text:"左",height:40,fontSize:28,color:"#faf114",align:"center"}},{type:"Label",props:{y:12,x:80,width:80,valign:"middle",text:"---",height:40,fontSize:28,color:"#faf114",align:"center"}},{type:"Button",props:{y:32,x:50,visible:!1,stateNum:1,skin:"ui/btn_chip.png",labelSize:20,label:"0",anchorY:.5,anchorX:.5}}]},{type:"Box",props:{y:90,x:453,width:173,name:"ROUT",height:65},child:[{type:"Label",props:{y:12,x:25,width:60,valign:"middle",text:"右",height:40,fontSize:28,color:"#faf114",align:"center"}},{type:"Label",props:{y:12,x:80,width:80,valign:"middle",text:"---",height:40,fontSize:28,color:"#faf114",align:"center"}},{type:"Button",props:{y:32,x:50,visible:!1,stateNum:1,skin:"ui/btn_chip.png",labelSize:20,label:"0",anchorY:.5,anchorX:.5}}]},{type:"Box",props:{y:90,x:764,width:173,name:"LHIT",height:65},child:[{type:"Label",props:{y:12,x:25,width:60,valign:"middle",text:"左",height:40,fontSize:28,color:"#faf114",align:"center"}},{type:"Label",props:{y:12,x:80,width:80,valign:"middle",text:"---",height:40,fontSize:28,color:"#faf114",align:"center"}},{type:"Button",props:{y:32,x:50,visible:!1,stateNum:1,skin:"ui/btn_chip.png",labelSize:20,label:"0",anchorY:.5,anchorX:.5}}]},{type:"Box",props:{y:90,x:938,width:173,name:"RHIT",height:65},child:[{type:"Label",props:{y:12,x:25,width:60,valign:"middle",text:"右",height:40,fontSize:28,color:"#faf114",align:"center"}},{type:"Label",props:{y:12,x:80,width:80,valign:"middle",text:"---",height:40,fontSize:28,color:"#faf114",align:"center"}},{type:"Button",props:{y:32,x:50,visible:!1,stateNum:1,skin:"ui/btn_chip.png",labelSize:20,label:"0",anchorY:.5,anchorX:.5}}]}]},{type:"Label",props:{width:1334,visible:!1,"var":"MsgPanel",text:"恭喜你猜中了",strokeColor:"#d00400",stroke:5,fontSize:60,color:"#fbff70",centerY:0,centerX:0,bold:!0,anchorY:.5,anchorX:.5,align:"center"}},{type:"Image",props:{width:152,"var":"Chips",top:100,skin:"ui/bg_chips.png",right:22,anchorY:.5,anchorX:.5},child:[{type:"Button",props:{y:60,stateNum:1,skin:"ui/chip_s.png",scaleY:1.1,scaleX:1.1,labelSize:20,labelColors:"#f00",label:"5",centerX:0,anchorY:.5,anchorX:.5}},{type:"Button",props:{y:148,stateNum:1,skin:"ui/btn_chip.png",scaleY:.9,scaleX:.9,labelSize:20,labelColors:"#f00",label:"10",centerX:0,anchorY:.5,anchorX:.5}},{type:"Button",props:{y:233,stateNum:1,skin:"ui/btn_chip.png",scaleY:.9,scaleX:.9,labelSize:20,labelColors:"#f00",label:"20",centerX:0,anchorY:.5,anchorX:.5}},{type:"Button",props:{y:317,stateNum:1,skin:"ui/btn_chip.png",scaleY:.9,scaleX:.9,labelSize:20,labelColors:"#f00",label:"50",centerX:0,anchorY:.5,anchorX:.5}},{type:"Button",props:{y:403,stateNum:1,skin:"ui/btn_chip.png",scaleY:.9,scaleX:.9,labelSize:20,labelColors:"#f00",label:"100",centerX:0,anchorY:.5,anchorX:.5}},{type:"Label",props:{y:455,x:24,"var":"minBetLabel",text:"最小:xxxx",fontSize:24,color:"#0012ff"}},{type:"Label",props:{y:490,x:24,"var":"maxBetLabel",text:"最大:xxxx",fontSize:24,color:"#0012ff"}}]},{type:"Image",props:{width:156,"var":"CancleBetBtn",skin:"ui/cancel.png",left:46,height:78,bottom:26,anchorY:.5,anchorX:.5}},{type:"Image",props:{"var":"ConfirmBetBtn",skin:"ui/confirm.png",right:20,bottom:26,anchorY:.5,anchorX:.5}}]},n}(View);t.BetPanelUI=e}(ui||(ui={})),function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.CardPanelUI.uiView)},n.uiView={type:"View",props:{y:0,x:0,width:1334,height:750},compId:1,child:[{type:"Image",props:{width:735,"var":"goal",skin:"ui/bg_door.png",height:325,centerX:20,bottom:265},child:[{type:"Image",props:{y:187,x:44,width:180,skin:"ui/poker/pkbg.png",name:"poker0",height:250,anchorY:.5,anchorX:.5}},{type:"Image",props:{y:187,x:700,width:180,skin:"ui/poker/pkbg.png",name:"poker1",height:250,anchorY:.5,anchorX:.5}},{type:"Image",props:{y:187,x:368,width:180,skin:"ui/poker/pkbg.png",name:"poker2",height:250,anchorY:.5,anchorX:.5},compId:6}]}],animations:[{nodes:[{target:6,keyframes:{name:[{value:"",tweenMethod:"linearNone",tween:!1,target:6,key:"name",index:0},{value:"pokerBg",tweenMethod:"linearNone",tween:!1,target:6,key:"name",index:20}]}},{target:29,keyframes:{name:[{value:"",tweenMethod:"linearNone",tween:!1,target:29,key:"name",index:0},{value:"pokerBg",tweenMethod:"linearNone",tween:!1,target:29,key:"name",index:20}]}},{target:32,keyframes:{name:[{value:"",tweenMethod:"linearNone",tween:!1,target:32,key:"name",index:0},{value:"pokerBg",tweenMethod:"linearNone",tween:!1,target:32,key:"name",index:20}]}},{target:1,keyframes:{"var":[{value:"door",tweenMethod:"linearNone",tween:!1,target:1,key:"var",index:0},{value:"",tweenMethod:"linearNone",tween:!1,target:1,key:"var",index:20}]}}],name:"ani2",id:2,frameRate:24,action:0}]},n}(View);t.CardPanelUI=e}(ui||(ui={})),function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.FootballUI.uiView)},n.uiView={type:"View",props:{width:1334,height:750},child:[{type:"Animation",props:{y:708,x:667,width:80,"var":"football",source:"FootballAni.ani",pivotY:40,pivotX:40,height:80}},{type:"Label",props:{y:375,x:667,wordWrap:!0,width:400,"var":"shootInfo",valign:"middle",text:"射中啦!",strokeColor:"#d00400",stroke:5,pivotY:50,pivotX:200,overflow:"hidden",height:100,fontSize:50,font:"Helvetica",color:"#fbff70",bold:!0,align:"center"}}]},n}(View);t.FootballUI=e}(ui||(ui={})),function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.GameUI.uiView)},n.uiView={type:"View",props:{width:1334,height:750},child:[{type:"Image",props:{y:0,x:0,width:1334,skin:"ui/bg.png",height:750}}]},n}(View);t.GameUI=e}(ui||(ui={})),function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.GameLoadUI.uiView)},n.uiView={type:"View",props:{width:1334,height:750},child:[{type:"Label",props:{y:374,x:666,width:80,"var":"progressLabel",text:"0%",height:40,fontSize:32,color:"#0f85aa",anchorY:.5,anchorX:.5}}]},n}(View);t.GameLoadUI=e}(ui||(ui={})),function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.HeadPanelUI.uiView)},n.uiView={type:"View",props:{y:0,width:1334,height:100},child:[{type:"Image",props:{width:1334,"var":"headBg",top:0,skin:"ui/bg_header.png",centerX:0},child:[{type:"Button",props:{y:4,x:932,width:124,"var":"btnGR",stateNum:1,skin:"ui/gr.png",height:72}},{type:"Button",props:{y:4,x:1130,width:124,"var":"btnRule",stateNum:1,skin:"ui/rule.png",height:72}},{type:"Image",props:{y:5,x:510,width:313,"var":"money",skin:"ui/bg_money.png",height:73},child:[{type:"Label",props:{y:15,x:77,width:214,"var":"score",text:"0",overflow:"hidden",height:32,fontSize:32,color:"#333333",align:"center"}}]},{type:"Image",props:{y:4,x:76,width:260,"var":"info",skin:"ui/bg_info.png",height:76},child:[{type:"Label",props:{y:18,x:82,width:160,"var":"nickname",text:"xxxxxx",overflow:"hidden",height:32,fontSize:32,color:"#333333",align:"left"}},{type:"Image",props:{y:8,x:8,width:56,"var":"headPic",skin:"ui/userImg.png",height:56}}]},{type:"Image",props:{y:4,x:130,width:124,visible:!1,"var":"attention",skin:"ui/attention.png",height:72}}]}]},n}(View);t.HeadPanelUI=e}(ui||(ui={})),function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.HistoryRecordUI.uiView)},n.uiView={type:"View",props:{y:0,x:0,width:212,height:538},child:[{type:"Image",props:{y:0,x:0,"var":"history",skin:"ui/bg_histrory.png"},child:[{type:"Panel",props:{y:15,x:0,width:210,"var":"listPanel",height:500},child:[{type:"List",props:{y:0,x:0,width:210,"var":"_list",spaceY:0,repeatY:5,height:500},child:[{type:"Box",props:{y:0,x:0,width:210,renderType:"render",name:"historyRecord",height:100},child:[{type:"Image",props:{y:10,x:7,width:60,skin:"ui/poker/pkbg.png",name:"poker0",height:80}},{type:"Image",props:{y:10,x:74,width:60,skin:"ui/poker/pkbg.png",name:"poker2",height:80}},{type:"Image",props:{y:10,x:141,width:60,skin:"ui/poker/pkbg.png",name:"poker1",height:80}}]}]}]}]},{type:"Image",props:{y:25,x:7,width:60,visible:!1,"var":"pokerPos0",skin:"ui/poker/pkbg.png",height:80}},{type:"Image",props:{y:25,x:73,width:60,visible:!1,"var":"pokerPos2",skin:"ui/poker/pkbg.png",height:80}},{type:"Image",props:{y:25,x:141,width:60,visible:!1,"var":"pokerPos1",skin:"ui/poker/pkbg.png",height:80}}]},n}(View);t.HistoryRecordUI=e}(ui||(ui={})),function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.LoadingUI.uiView)},n.uiView={type:"View",props:{width:1334,height:750},child:[{type:"Image",props:{y:0,x:0,skin:"ui/mask.png"}},{type:"Animation",props:{y:393,x:685,width:36,visible:!1,"var":"loadingAni",source:"Loading.ani",pivotY:36,pivotX:36,height:36},compId:2},{type:"Label",props:{width:242.798828125,visible:!1,"var":"connectServer",text:"connecting server...",strokeColor:"#d00400",stroke:5,height:28,fontSize:28,color:"#fbff70",centerY:0,centerX:0,anchorY:.5,anchorX:.5}}],animations:[{nodes:[{target:2,keyframes:{autoPlay:[{value:!1,tweenMethod:"linearNone",tween:!1,target:2,key:"autoPlay",index:0}]}}],name:"loading",id:1,frameRate:24,action:0}]},n}(View);t.LoadingUI=e}(ui||(ui={})),function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.NoteRecordUI.uiView)},n.uiView={type:"View",props:{width:1334,height:750,centerY:0,centerX:0},child:[{type:"Image",props:{y:0,x:0,width:1334,skin:"ui/mask.png",height:750}},{type:"Image",props:{"var":"prompt",skin:"ui/bg_record.png",centerY:0,centerX:0},child:[{type:"Image",props:{y:15,x:960,"var":"close",skin:"ui/close.png"}},{type:"Image",props:{y:10,x:426,"var":"title",skin:"ui/betrecord.png"}},{type:"Panel",props:{y:65,x:13,width:1e3,height:510},child:[{type:"Box",props:{y:0,x:0,"var":"recordBox"},child:[{type:"Box",props:{y:0,x:0,width:1e3,"var":"recordHome",height:510},child:[{type:"List",props:{y:60,x:0,width:1e3,"var":"_recordList",spaceY:0,repeatY:5,height:450},child:[{type:"Box",props:{y:0,x:0,width:1e3,renderType:"render",name:"listBox",height:100},child:[{type:"Label",props:{y:20,x:800,wordWrap:!0,width:150,valign:"middle",text:"100",overflow:"scroll",name:"total",height:60,fontSize:30,font:"Arial",color:"#000000",align:"center"}},{type:"Label",props:{y:30,x:168,wordWrap:!0,width:120,valign:"middle",text:"14:36:25",overflow:"scroll",name:"betTime",height:40,fontSize:30,font:"Arial",color:"#000000",align:"left"}},{type:"Label",props:{y:30,x:14,wordWrap:!0,width:150,valign:"middle",text:" 2018/1/12",overflow:"scroll",name:"betDate",height:40,fontSize:30,font:"Arial",color:"#000000",align:"left"}},{type:"Label",props:{y:10,x:295,wordWrap:!0,width:558,valign:"middle",text:"31243214234234",overflow:"scroll",name:"roundId",height:80,fontSize:28,font:"Arial",color:"#000000",align:"center"}},{type:"Image",props:{y:100,x:0,width:1e3,skin:"ui/recordLine.png",height:1}},{type:"Image",props:{y:34,x:950,skin:"ui/go.png"}}]}]},{type:"Box",props:{y:0,x:0},child:[{type:"Label",props:{y:0,x:21,wordWrap:!0,width:222,valign:"middle",text:"时间",overflow:"scroll",height:60,fontSize:36,font:"Arial",color:"#000000",align:"center"}},{type:"Label",props:{y:0,x:295,wordWrap:!0,width:558,valign:"middle",text:"局号",overflow:"scroll",height:60,fontSize:36,font:"Arial",color:"#000000",align:"center"}},{type:"Label",props:{y:0,x:800,wordWrap:!0,width:150,valign:"middle",text:"输赢",overflow:"scroll",height:60,fontSize:36,font:"Arial",color:"#000000",align:"center"}},{type:"Image",props:{y:60,x:0,width:1e3,skin:"ui/recordLine.png",height:1}}]},{type:"Label",props:{y:225,x:400,wordWrap:!0,width:200,"var":"noBetData",valign:"middle",text:"暂无投注记录",overflow:"scroll",height:60,fontSize:30,font:"Arial",color:"#000000",align:"center"}}]},{type:"Box",props:{y:0,x:1e3,width:1e3,"var":"recordDetail",height:510},child:[{type:"Image",props:{y:0,x:20,width:57,"var":"back",skin:"ui/back.png",height:50}},{type:"Box",props:{y:60,x:0,width:1e3,height:100},child:[{type:"Label",props:{y:20,x:40,wordWrap:!0,width:300,"var":"roundId",valign:"middle",text:"544656",overflow:"scroll",height:60,fontSize:30,font:"Arial",color:"#000000",align:"left"}},{type:"Label",props:{y:20,x:700,wordWrap:!0,width:200,"var":"betResult",valign:"middle",text:"赢",overflow:"hidden",height:60,fontSize:30,font:"Arial",color:"#000000",align:"left"}},{type:"Image",props:{y:100,x:0,width:1e3,skin:"ui/recordLine.png",height:1}},{type:"Box",props:{y:10,x:370,width:215,height:80},child:[{type:"Image",props:{width:60,"var":"poker1",skin:"ui/poker/1.png",height:80}},{type:"Image",props:{y:0,x:75,width:60,"var":"poker3",skin:"ui/poker/1.png",height:80}},{type:"Image",props:{y:-1,x:150,width:60,"var":"poker2",skin:"ui/poker/1.png",height:80}}]}]},{type:"List",props:{y:220,x:0,width:1e3,"var":"betDetailList",spaceY:0,repeatY:3,height:290},child:[{type:"Box",props:{width:1e3,renderType:"render",name:"listBox",height:100},child:[{type:"Image",props:{y:100,x:0,width:1e3,skin:"ui/recordLine.png",height:1}},{type:"Label",props:{y:0,x:0,wordWrap:!0,width:80,valign:"middle",text:"1",overflow:"hidden",name:"betNum",height:100,fontSize:30,font:"Arial",color:"#000000",align:"center"}},{type:"List",props:{y:0,x:80,width:920,"var":"betTypeList",spaceX:0,repeatX:5,name:"betTypeList",height:100},child:[{type:"Box",props:{width:300,renderType:"render",height:100},child:[{type:"Label",props:{y:0,x:0,wordWrap:!0,width:100,valign:"middle",text:"左撞柱",overflow:"hidden",name:"betPos",height:100,fontSize:30,font:"Arial",color:"#000000",align:"center"}},{type:"Label",props:{y:0,x:100,wordWrap:!0,width:100,valign:"middle",text:"1.85",overflow:"hidden",name:"betOdds",height:100,fontSize:30,font:"Arial",color:"#000000",align:"center"}},{type:"Label",props:{y:0,x:200,wordWrap:!0,width:100,valign:"middle",text:"5",overflow:"hidden",name:"betAmount",height:100,fontSize:30,font:"Arial",color:"#000000",align:"center"}},{type:"Label",props:{y:25,x:110,wordWrap:!0,width:1,valign:"middle",rotation:15,overflow:"hidden",name:"line",height:50,fontSize:30,font:"Arial",color:"#000000",bgColor:"#000000",align:"center"}},{type:"Label",props:{y:25,x:210,wordWrap:!0,width:1,valign:"middle",rotation:15,overflow:"hidden",name:"line",height:50,fontSize:30,font:"Arial",color:"#000000",bgColor:"#000000",align:"center"}}]}]}]}]},{type:"Box",props:{y:160,x:0,width:1e3,height:60},child:[{type:"Label",props:{y:10,x:40,wordWrap:!0,width:236,valign:"middle",text:"投注详情如下：",overflow:"scroll",height:40,fontSize:30,font:"Arial",color:"#000000",align:"left"}},{type:"Image",props:{y:60,x:0,width:1e3,skin:"ui/recordLine.png",height:1}}]}]}]}]}]}]},n}(View);t.NoteRecordUI=e}(ui||(ui={})),function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.PromptUI.uiView)},n.uiView={type:"View",props:{width:1334,height:750},child:[{type:"Image",props:{y:0,x:0,width:1334,skin:"ui/mask.png",height:750},child:[{type:"Image",props:{y:209,x:375,width:584,"var":"prompt",skin:"ui/bg_alert.png",sizeGrid:"15,15,11,13",height:332,centerY:0,centerX:0},child:[{type:"Label",props:{y:106,x:50,wordWrap:!0,width:484,"var":"promptTxt",valign:"top",overflow:"scroll",height:120,fontSize:32,font:"Arial",color:"#000000",align:"left"}},{type:"Box",props:{y:240,x:244,"var":"sureBox"},child:[{type:"Image",props:{y:0,x:0,width:94,skin:"ui/ok.png",name:"sureBtn",height:54}}]},{type:"Image",props:{y:27,x:232,width:120,skin:"ui/title.png",height:36}}]}]}]},n}(View);t.PromptUI=e}(ui||(ui={})),function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.RoundPanelUI.uiView)},n.uiView={type:"View",props:{y:0,x:0,width:1334,height:750},child:[{type:"Image",props:{"var":"round",top:98,skin:"ui/bg_round.png",centerX:20},child:[{type:"Label",props:{y:18,x:28,width:103,text:"期号:",height:43,fontSize:30,color:"#000000"}},{type:"Label",props:{y:18,x:544,width:168,"var":"gameState",text:"等待开始",height:40,fontSize:30,color:"#000000",align:"right"}},{type:"Label",props:{y:20,x:106,width:448,"var":"gameRound",height:26,fontSize:26,color:"#010101"}}]}]},n}(View);t.RoundPanelUI=e}(ui||(ui={})),function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.RulePanelUI.uiView)},n.uiView={type:"View",props:{width:1334,height:750},child:[{type:"Image",props:{y:0,x:0,width:1334,skin:"ui/mask.png",height:750},child:[{type:"Image",props:{"var":"prompt",skin:"ui/bg_record.png",centerY:0,centerX:0},child:[{type:"Image",props:{y:10,x:426,skin:"ui/ruleTitle.png"}},{type:"Label",props:{y:90,x:65,wordWrap:!0,width:896,"var":"gameRule",valign:"top",text:"游戏规则",overflow:"scroll",height:458,fontSize:32,font:"Arial",color:"#000000",align:"left"}},{type:"Image",props:{y:15,x:960,"var":"close",skin:"ui/close.png"}}]}]}]},n}(View);t.RulePanelUI=e}(ui||(ui={})),function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.TimeUI.uiView)},n.uiView={type:"View",props:{y:0,width:114,height:133,centerX:20,bottom:330},child:[{type:"Image",props:{y:67,x:57,width:114,"var":"timeClock",skin:"ui/bg_time.png",height:133,anchorY:.5,anchorX:.5},child:[{type:"Box",props:{y:58,x:30,width:60,"var":"time",height:40},child:[{type:"Clip",props:{y:0,x:0,width:32,skin:"ui/clip_number.png",name:"item0",height:40,clipX:10}},{type:"Clip",props:{y:0,x:30,width:32,skin:"ui/clip_number.png",sizeGrid:"0,0,0,0",name:"item1",index:0,height:40,clipX:10}}]}]}]},n}(View);t.TimeUI=e}(ui||(ui={})),function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.TipsPanelUI.uiView)},n.uiView={type:"View",props:{x:0,width:1334,visible:!0,renderType:"mask",height:750},child:[{type:"Image",props:{y:0,x:0,width:1334,skin:"ui/mask.png",height:750},child:[{type:"Image",props:{width:726,skin:"ui/tip.png",height:442,centerY:-76,centerX:-76},child:[{type:"Image",props:{width:40,"var":"closeBtn",top:91,skin:"ui/tipclose.png",right:44}}]}]}]},n}(View);t.TipsPanelUI=e}(ui||(ui={}));var ScenePanel;!function(t){t.LoadResourcesConfig=[{url:"res/atlas/ui.atlas",type:Laya.Loader.ATLAS},{url:"res/atlas/ui/poker.atlas",type:Laya.Loader.ATLAS},{url:"ui/bg_header.png",type:Laya.Loader.IMAGE},{url:"ui/bg.png",type:Laya.Loader.IMAGE},{url:"ui/mask.png",type:Laya.Loader.IMAGE},{url:"ui/bg_alert.png",type:Laya.Loader.IMAGE},{url:"ui/bg_record.png",type:Laya.Loader.IMAGE},{url:"ui/recordLine.png",type:Laya.Loader.IMAGE},{url:"ui/tip.png",type:Laya.Loader.IMAGE},{url:"ui/bg_round.png",type:Laya.Loader.IMAGE},{url:"ui/bg_histrory.png",type:Laya.Loader.IMAGE},{url:"ui/bg_bet.png",type:Laya.Loader.IMAGE},{url:"sound/bet.wav",type:Laya.Loader.SOUND},{url:"sound/csz1.wav",type:Laya.Loader.SOUND},{url:"sound/hitdoor.wav",type:Laya.Loader.SOUND},{url:"sound/kickball.mp3",type:Laya.Loader.SOUND},{url:"sound/shootfail.wav",type:Laya.Loader.SOUND},{url:"sound/shootsuccess.wav",type:Laya.Loader.SOUND}]}(ScenePanel||(ScenePanel={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ScenePanel;!function(t){var e;!function(t){t[t.ODDS=0]="ODDS",t[t.BET=1]="BET",t[t.CANCEL=2]="CANCEL",t[t.CHIP=3]="CHIP"}(e=t.ClickType||(t.ClickType={}));var n=function(){function t(){}return t}();t.ClickResultDto=n;var i=function(t){function n(){var e=t.call(this)||this;return e.chipPrice=5,e.selectedChipNum=0,e.chipsPoint=new Array,e.betBtnPoint=new Array,e.betBtnArr=new Array,e.oddsLabelArr=new Array,e.betMoneyLabelArr=new Array,e.chipsBtn=new Array,e.guessSuccess=!1,e.chipsNormalSkin="ui/btn_chip.png",e.chipsSelectSkin="ui/chip_s.png",e.ResetBetBtnLabel(),e.ConfirmBetBtn.disabled=!0,e.CancleBetBtn.disabled=!0,GameConfig.RatioType?(e.CancleBetBtn.scale(GameConfig.HeightWidth,1),e.ConfirmBetBtn.scale(GameConfig.HeightWidth,1),e.Chips.scale(GameConfig.HeightWidth,1),e.BetBox.scale(GameConfig.HeightWidth,1)):(e.CancleBetBtn.scale(1,GameConfig.WidthHeight),e.ConfirmBetBtn.scale(1,GameConfig.WidthHeight),e.Chips.scale(1,GameConfig.WidthHeight),e.BetBox.scale(1,GameConfig.WidthHeight)),e}return __extends(n,t),n.prototype.SetClickHandelr=function(t){this.handler=t,this.BindClick()},n.prototype.SetBetting=function(t){this.isBetting=t},n.prototype.BindClick=function(){for(var t=new LanguageUtils.Language,e=1;13>=e;e++){var n=this.BetBox.getChildByName(Enum.BetPosType[e]);n.on(Laya.Event.CLICK,this,this.Bet,[e-1]),this.betBtnArr.push(n),this.betMoneyLabelArr.push(n.getChildAt(2)),this.oddsLabelArr.push(n.getChildAt(1)),n.getChildAt(0).text=t.GetLanguage(Enum.BetPosType[e].toLowerCase())}this.ConfirmBetBtn.on(Laya.Event.CLICK,this,this.ConfirmBet),this.CancleBetBtn.on(Laya.Event.CLICK,this,this.CancleBet);for(var e=0;5>e;e++){var i=this.Chips.getChildAt(e);
this.chipsBtn.push(i),i.on(Laya.Event.CLICK,this,this.ChangeChip,[e,i.label])}this.GetChipsPoint(),this.GetBetBtnPoint()},n.prototype.GetChipsPoint=function(){for(var t=0;t<this.chipsBtn.length;t++){var e=this.chipsBtn[t].getBounds().width,n=this.chipsBtn[t].getBounds().height,i=this.chipsBtn[t].getBounds().x+e/2,o=this.chipsBtn[t].getBounds().y+n;GameConfig.RatioType?i*=GameConfig.HeightWidth:o*=GameConfig.WidthHeight,this.chipsPoint.push(new Laya.Point(this.Chips.x-i,this.Chips.y+o))}},n.prototype.GetBetBtnPoint=function(){for(var t=0;t<this.betMoneyLabelArr.length;t++){var e=this.betMoneyLabelArr[t].getBounds().width,n=this.betMoneyLabelArr[t].getBounds().height,i=this.betMoneyLabelArr[t].getBounds().x+e/2+this.betMoneyLabelArr[t].parent.x,o=this.betMoneyLabelArr[t].getBounds().y+n/2+this.betMoneyLabelArr[t].parent.y;GameConfig.RatioType?(i*=GameConfig.HeightWidth,o+=498):o*=GameConfig.WidthHeight;var r=new Laya.Point(this.BetBox.x+i,this.BetBox.y+o);this.betBtnPoint.push(r)}},n.prototype.ResetBetBtnLabel=function(){this.ConfirmBetBtn.disabled=!0,this.CancleBetBtn.disabled=!0;for(var t=0,e=this.betBtnArr.length;e>t;t++)this.betMoneyLabelArr[t].label="0",this.betMoneyLabelArr[t].visible=!1},n.prototype.SetBetBtn=function(t){for(var e=0,n=this.betBtnArr.length;n>e;e++)this.betBtnArr[e].disabled=t},n.prototype.SetOdds=function(t){for(var e=0,n=this.betBtnArr.length;n>e;e++){var i=t[e+1];0==i?(this.oddsLabelArr[e].text="---",this.betBtnArr[e].disabled=!0):this.oddsLabelArr[e].text=t[e+1]}},n.prototype.Bet=function(t){this.ConfirmBetBtn.disabled=!1,this.CancleBetBtn.disabled=!1;var n={Type:e.ODDS,Data:t+1};this.handler.runWith(n),Utils.BackgroundMusic.PlaySounds("sound/bet.wav")},n.prototype.SetBetPos=function(t,e){if(e)for(var n=0,i=e.length;i>n;n++){var o=e[n].BetPos-1;this.betMoneyLabelArr[o].visible=!1}if(t)for(var n in t){var o=Number(n)-1;t[n]?this.betMoneyLabelArr[o].visible||(this.betMoneyLabelArr[o].visible=!0):this.betMoneyLabelArr[o].visible=!1,this.betMoneyLabelArr[o].label!==t[n]&&(this.betMoneyLabelArr[o].label=t[n])}else for(var n=0,i=this.betBtnArr.length;i>n;n++)this.betMoneyLabelArr[n].label="0",this.betMoneyLabelArr[n].visible=!1},n.prototype.GameInit=function(t,e){this.SetLimit(e),this.SetBetPos(t),this.RestSkin()},n.prototype.GameResult=function(t,e,n){n&&this.SetLimit(n),this.SetBetPos(t,e),this.RestSkin(),this.DisabledAllBtn()},n.prototype.SetLimit=function(t){this.maxBet=t.MaxBet,this.minBet=t.MinBet,this.maxBetLabel.text="最大:"+t.MaxBet,this.minBetLabel.text="最小:"+t.MinBet},n.prototype.RestSkin=function(){for(var t=0;12>t;t++);},n.prototype.SettleResult=function(t){{var e=JSON.parse(t.GameResult),n=Utils.Poker.GetNumber(e.ThirdCard);new Array}for(var i in t.SettleResult)if(t.SettleResult[i]>0){if(7==n){var o=Number(i);if(Enum.BetPosType.BIG==o){this.betBtnArr[Number(i)-1].gray=!1;continue}if(Enum.BetPosType.SMALL==o){this.betBtnArr[Number(i)-1].gray=!1;continue}if(Enum.BetPosType.ODD==o){this.betBtnArr[Number(i)-1].gray=!1;continue}if(Enum.BetPosType.EVEN==o){this.betBtnArr[Number(i)-1].gray=!1;continue}}this.betBtnArr[Number(i)-1].gray=!1,t.SettleResult[i]>100&&(t.SettleResult[i]=Utils.Money.Format(t.SettleResult[i],0)),this.betMoneyLabelArr[Number(i)-1].label=t.SettleResult[i],this.guessSuccess=!0}this.guessSuccess||this.ShowMsg("很遗憾，再接再厉")},n.prototype.ConfirmBet=function(){this.ConfirmBetBtn.disabled=!0,this.CancleBetBtn.disabled=!0;var t={Type:e.BET};this.handler.runWith(t)},n.prototype.CancleBet=function(){this.ResetBetBtnLabel();var t={Type:e.CANCEL};this.handler.runWith(t)},n.prototype.ChangeChip=function(t){this.selectedChipNum=t,this.selectedChip=this.Chips.getChildAt(t),this.chipPrice=Number(this.selectedChip.label);for(var n=0;5>n;n++){var i=this.Chips.getChildAt(n);i.skin=this.chipsNormalSkin,i.scale(.9,.9)}this.selectedChip.skin=this.chipsSelectSkin,this.selectedChip.scale(1.1,1.1);var o={Type:e.CHIP,Data:this.chipPrice};this.handler.runWith(o)},n.prototype.DisabledAllBtn=function(){this.ConfirmBetBtn.disabled=!0,this.CancleBetBtn.disabled=!0,this.SetBetBtn(!0)},n.prototype.DisabledBetBtn=function(){this.ConfirmBetBtn.disabled=!0,this.CancleBetBtn.disabled=!0},n.prototype.ShowMsg=function(t){var e=this;this.MsgPanel.changeText(t),this.MsgPanel.visible=!0,Laya.timer.once(1500,this,function(){e.MsgPanel.visible=!1})},n.prototype.ChipsFly=function(t,e){var n=this.betBtnArr[t].getChildAt(2),i=this.betBtnPoint[t].x,o=this.betBtnPoint[t].y,r=Laya.Pool.getItemByClass("flyChip",Laya.Button);r.stateNum=1,r.label=this.chipPrice.toString(),r.anchorX=.5,r.anchorY=.5,r.pos(this.chipsPoint[this.selectedChipNum.toString()].x,this.chipsPoint[this.selectedChipNum.toString()].y-40),r.skin=this.chipsNormalSkin;var a={x:i,y:o,scaleX:1,scaleY:1};GameConfig.RatioType?(r.scale(1.1*GameConfig.HeightWidth,1.1),a.scaleX=GameConfig.HeightWidth):(r.scale(1.1,1.1*GameConfig.WidthHeight),a.scaleY=GameConfig.WidthHeight),this.addChild(r),Laya.Tween.to(r,a,700,Laya.Ease.cubicInOut,Laya.Handler.create(this,this.ChipsFlyCallBack,[r,n,e],!1))},n.prototype.ChipsFlyCallBack=function(t,e,n){t.removeSelf(),Laya.Pool.recover("flyChip",t),this.isBetting&&(e.label=n.toString(),e.visible=!0)},n}(ui.BetPanelUI);t.BetPanel=i}(ScenePanel||(ScenePanel={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ScenePanel;!function(t){var e=function(t){function e(){var e=t.call(this)||this;e.pokerNum=3,e.pokerCards=[],e.pokerArr=e.goal;for(var n=0;n<e.pokerNum;n++){var i=e.goal.getChildByName("poker"+n),o=new PokerEffect(i);e.pokerCards.push(o)}return GameConfig.RatioType?e.goal.scale(GameConfig.HeightWidth,1):e.goal.scale(1,GameConfig.WidthHeight),e}return __extends(e,t),e.prototype.GetFlyPoker=function(){if(!this.flyPoker){this.flyPoker=[{x:0,y:0,width:0,height:0},{x:0,y:0,width:0,height:0},{x:0,y:0,width:0,height:0}];for(var t=0;t<this.pokerNum;t++){var e=this.goal.getChildByName("poker"+t);GameConfig.RatioType?(this.flyPoker[t].x=e.x*GameConfig.HeightWidth+this.goal.x,this.flyPoker[t].y=e.y+this.goal.y,this.flyPoker[t].width=e.width*GameConfig.HeightWidth,this.flyPoker[t].height=e.height):(this.flyPoker[t].x=e.x+this.goal.x,this.flyPoker[t].y=e.y+this.goal.y*GameConfig.WidthHeight,this.flyPoker[t].width=e.width,this.flyPoker[t].height=e.height*GameConfig.WidthHeight)}}return this.flyPoker},e}(ui.CardPanelUI);t.CardPanel=e}(ScenePanel||(ScenePanel={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ScenePanel;!function(t){var e=function(t){function e(e){var n=t.call(this)||this;return n.footballR=n.football.pivotX,n.goalW=e.goal.width,n.goalH=e.goal.height,n.goalCenterX=e.goal.centerX,n.goalBottom=e.goal.bottom,n.shootSound="sound/kickball.mp3",n.shootInfo.pos(Laya.stage.width/2,Laya.stage.height/2),n.ShootReset(),GameConfig.RatioType?n.football.scale(GameConfig.HeightWidth,1):n.football.scale(1,GameConfig.WidthHeight),n}return __extends(e,t),e.prototype.ShootReset=function(){this.football.visible=!1,this.shootInfo.visible=!1,this.football.pos(Laya.stage.width/2,1e3),this.shootInfo.text=null,this.isActive=!1,this.shootResSound="",this.football.play(0,!1,"shootOutPost")},e.prototype.ShootIn=function(){this.isActive||(Utils.BackgroundMusic.PlaySounds(this.shootSound),this.isActive=!0,this.football.visible=!0,this.shootEndY=Laya.stage.height-this.goalBottom,this.shootEndX=Laya.stage.width/2+this.goalCenterX,this.shootInfo.text="球进啦！",this.shootResSound="sound/shootsuccess.wav",Laya.Tween.to(this.football,{y:this.shootEndY,x:this.shootEndX},3e3,Laya.Ease.backOut,Laya.Handler.create(this,this.ShootInfoShow)))},e.prototype.ShootLeft=function(){this.isActive||(Utils.BackgroundMusic.PlaySounds(this.shootSound),this.isActive=!0,this.football.visible=!0,this.shootEndY=Laya.stage.height-this.goalBottom,this.shootEndX=(Laya.stage.width-this.goalW)/2+this.goalCenterX-this.footballR/2,this.shootInfo.text="左边射偏啦！",this.shootResSound="sound/shootfail.wav",Laya.Tween.to(this.football,{y:this.shootEndY,x:this.shootEndX},3e3,Laya.Ease.backOut,Laya.Handler.create(this,this.ShootInfoShow)))},e.prototype.ShootRight=function(){this.isActive||(Utils.BackgroundMusic.PlaySounds(this.shootSound),this.isActive=!0,this.football.visible=!0,this.shootEndY=Laya.stage.height-this.goalBottom,this.shootEndX=(Laya.stage.width-this.goalW)/2+this.goalCenterX+this.goalW+3*this.footballR/2,this.shootInfo.text="右边射偏啦！",this.shootResSound="sound/shootfail.wav",Laya.Tween.to(this.football,{y:this.shootEndY,x:this.shootEndX},3e3,Laya.Ease.backOut,Laya.Handler.create(this,this.ShootInfoShow)))},e.prototype.ShootGoalPost=function(t){this.isActive||(Utils.BackgroundMusic.PlaySounds(this.shootSound),this.football.play(0,!1,"shootOnPost"),this.isActive=!0,this.football.visible=!0,this.shootEndY=Laya.stage.height/2,0==t&&(this.shootInfo.text="左边撞柱啦！",this.shootEndX=(Laya.stage.width-this.goalW)/2+this.goalCenterX+this.footballR/2),1==t&&(this.shootInfo.text="右边撞柱啦！",this.shootEndX=(Laya.stage.width+this.goalW)/2+this.goalCenterX+this.footballR/2),2==t&&(this.shootInfo.text="撞柱啦！",this.shootEndX=(Laya.stage.width-this.goalW)/2+this.goalCenterX+this.footballR/2),this.shootResSound="sound/hitdoor.wav",Laya.Tween.to(this.football,{y:this.shootEndY,x:this.shootEndX},1500,Laya.Ease.backOut,Laya.Handler.create(this,this.OnPostBounce)))},e.prototype.OnPostBounce=function(){this.shootEndY=3*Laya.stage.height/4,this.shootEndX=Laya.stage.width/2+this.goalCenterX,Laya.Tween.to(this.football,{y:this.shootEndY,x:this.shootEndX},1500,Laya.Ease.quadOut,Laya.Handler.create(this,this.ShootInfoShow))},e.prototype.ShootInfoShow=function(){Utils.BackgroundMusic.PlaySounds(this.shootResSound),this.shootInfo.visible=!0,this.football.stop(),Laya.Tween.to(this.shootInfo,{},2e3,Laya.Ease.backOut,Laya.Handler.create(this,this.ShootReset))},e}(ui.FootballUI);t.FootBallPanel=e}(ScenePanel||(ScenePanel={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ScenePanel;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.cacheAs="bitmap",e}return __extends(e,t),e.prototype.LoadProgress=function(t){this.progressLabel.text=Math.round(100*t)+"%"},e.prototype.LoadError=function(){Laya.Browser.window.alert("用户登录错误")},e}(ui.GameLoadUI);t.GameLoadScenes=e}(ScenePanel||(ScenePanel={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ScenePanel;!function(t){var e=function(e){function n(){var n=e.call(this)||this;n.flyPoker=new Array,n.zOrder=1,Laya.stage.addChild(n),n.roundPanel=new t.RoundPanel,n.roundPanel.zOrder=2,Laya.stage.addChild(n.roundPanel),n.cardPanel=new t.CardPanel,n.cardPanel.zOrder=2,Laya.stage.addChild(n.cardPanel),n.footballPanel=new t.FootBallPanel(n.cardPanel),n.footballPanel.zOrder=3,Laya.stage.addChild(n.footballPanel),n.timePanel=new t.TimePanel,n.timePanel.zOrder=4,Laya.stage.addChild(n.timePanel),n.betPanel=new t.BetPanel,n.betPanel.zOrder=5,Laya.stage.addChild(n.betPanel),n.historyPanel=new t.HistoryPanel,n.historyPanel.zOrder=6,Laya.stage.addChild(n.historyPanel),n.headPanel=new t.HeadPanel,n.headPanel.zOrder=7,Laya.stage.addChild(n.headPanel),n.promptPanel=new t.PromptPanel,n.promptPanel.zOrder=8,Laya.stage.addChild(n.promptPanel),n.noteReocrdPanel=new t.NoteRecordPanel,n.noteReocrdPanel.zOrder=8,Laya.stage.addChild(n.noteReocrdPanel),n.rulePanel=new t.RulePanel,n.rulePanel.zOrder=8,Laya.stage.addChild(n.rulePanel),n.loadingPanel=new t.LoadingPanel,n.loadingPanel.zOrder=9,Laya.stage.addChild(n.loadingPanel),n.tipsPanel=new t.TipsPanel,n.tipsPanel.zOrder=10,Laya.stage.addChild(n.tipsPanel);for(var i=0;3>i;i++){var o=Laya.Pool.getItemByClass("flyPoker",Laya.Image);o.visible=!1,o.zOrder=7,o.anchorX=.5,o.anchorY=.5,n.flyPoker.push(o),Laya.stage.addChild(o)}return n}return __extends(n,e),n.prototype.FlyPoker=function(t){var e=this,n=this.cardPanel.GetFlyPoker(),i=this.historyPanel.GetEndFlyPoker(),o=0;for(var r in t)t.hasOwnProperty(r)&&(this.flyPoker[o].skin="ui/poker/"+t[r]+".png",this.flyPoker[o].visible=!0,this.flyPoker[o].x=n[o].x,this.flyPoker[o].y=n[o].y,this.flyPoker[o].width=n[o].width,this.flyPoker[o].height=n[o].height,this.flyPoker[o].scale(1,1),Laya.Tween.to(this.flyPoker[o],{x:i[o].x,y:i[o].y,width:i[o].width,height:i[o].height},2e3,Laya.Ease.sineInOut,Laya.Handler.create(this,function(t){e.flyPoker[t].visible=!1},[o])),o++)},n}(ui.GameUI);t.GameScenes=e}(ScenePanel||(ScenePanel={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ScenePanel;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.cacheAs="bitmap",GameConfig.RatioType?e.headBg.scale(GameConfig.HeightWidth,1):e.headBg.scale(1,GameConfig.WidthHeight),e}return __extends(e,t),e.prototype.SetInfo=function(t,e,n,i,o){this.grHandler=n,this.ruleHandler=i,this.parentID=e,t&&!o?(this.info.visible=!0,this.headPic.skin=t.HeadImageUrl,this.nickname.text=t.Nickname?t.Nickname:t.Account,this.score.text=Utils.Money.Format(t.Score)):(this.info.visible=!1,this.attention.visible=!0,this.score.text=t&&t.Score?Utils.Money.Format(t.Score):Utils.Money.Format(0)),this.moneyEffect=new NumberGradualChangeEffect(this.score),this.btnRule.on(Laya.Event.CLICK,this,this.onRuleHandler),this.btnGR.on(Laya.Event.CLICK,this,this.onGRHandler),this.attention.on(Laya.Event.CLICK,this,this.ClickAttention)},e.prototype.onRuleHandler=function(){this.ruleHandler.run()},e.prototype.onGRHandler=function(){this.grHandler.run()},e.prototype.ClickAttention=function(){Laya.Browser.window.location.href=GameConfig.GetWeChatUrl(this.parentID,!0)},e.prototype.ChangeMoney=function(t){this.moneyEffect.start(t)},e}(ui.HeadPanelUI);t.HeadPanel=e}(ScenePanel||(ScenePanel={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ScenePanel;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.cacheAs="bitmap",e.left=20,e.top=100,GameConfig.RatioType?e.history.scale(GameConfig.HeightWidth,1):e.history.scale(1,GameConfig.WidthHeight),e.listBoxH=e.listPanel.height/5,e}return __extends(e,t),e.prototype.ScrollHistoryList=function(t){Laya.Tween.to(this._list,{y:this.listBoxH},2e3,Laya.Ease.quadInOut,Laya.Handler.create(this,this.ResetHistoryList)),this.hander=t},e.prototype.ResetHistoryList=function(){this._list.y=0,this.hander.run()},e.prototype.GetEndFlyPoker=function(){if(!this.flyPoker){this.flyPoker=[{x:0,y:0,width:0,height:0},{x:0,y:0,width:0,height:0},{x:0,y:0,width:0,height:0}];for(var t=0;3>t;t++){var e=this["pokerPos"+t];GameConfig.RatioType?(this.flyPoker[t].width=e.width*GameConfig.HeightWidth,this.flyPoker[t].height=e.height,this.flyPoker[t].x=e.x*GameConfig.HeightWidth+20+this.flyPoker[t].width/2,this.flyPoker[t].y=e.y+100+this.flyPoker[t].height/2):(this.flyPoker[t].width=e.width,this.flyPoker[t].height=e.height*GameConfig.WidthHeight,this.flyPoker[t].x=e.x+20+this.flyPoker[t].width/2,this.flyPoker[t].y=e.y*GameConfig.WidthHeight+100+this.flyPoker[t].height/2)}}return this.flyPoker},e}(ui.HistoryRecordUI);t.HistoryPanel=e}(ScenePanel||(ScenePanel={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ScenePanel;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.cacheAs="bitmap",e.centerX=0,e.centerY=0,e.visible=!1,e.on(Laya.Event.CLICK,e,function(){}),e}return __extends(e,t),e.prototype.ShowLoading=function(){this.visible=!0,this.loadingAni.play()},e.prototype.HideLoading=function(){this.visible=!1,this.loadingAni.stop()},e.prototype.ShowConnect=function(){this.visible=!0,this.connectServer.visible=!0,this.loadingAni.visible=!1},e.prototype.HideConnect=function(){this.visible=!1,this.connectServer.visible=!1,this.loadingAni.visible=!0},e}(ui.LoadingUI);t.LoadingPanel=e}(ScenePanel||(ScenePanel={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ScenePanel;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.cacheAs="bitmap",e.centerX=0,e.centerY=0,e.visible=!1,e.sureBox.getChildByName("sureBtn").on(Laya.Event.CLICK,e,e.OnClickConfirm),GameConfig.RatioType?e.prompt.scale(GameConfig.HeightWidth,1):e.prompt.scale(1,GameConfig.WidthHeight),e}return __extends(e,t),e.prototype.ShowMsg=function(t){this.visible=!0,this.promptTxt.text=t},e.prototype.OnClickConfirm=function(){this.visible=!1},e}(ui.PromptUI);t.PromptPanel=e}(ScenePanel||(ScenePanel={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ScenePanel;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.timeEffect=new TimeEffect(e.time),e.visible=!1,GameConfig.RatioType?e.scale(GameConfig.HeightWidth,1):e.scale(1,GameConfig.WidthHeight),e}return __extends(e,t),e}(ui.TimeUI);t.TimePanel=e}(ScenePanel||(ScenePanel={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ScenePanel;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.dataArr=[],e.cacheAs="bitmap",GameConfig.RatioType?e.prompt.scale(GameConfig.HeightWidth,1):e.prompt.scale(1,GameConfig.WidthHeight),e.visible=!1,e._recordList.visible=!1,e.noBetData.visible=!1,e.close.on(Laya.Event.CLICK,e,e.CloseNoteRecord),e.back.on(Laya.Event.CLICK,e,e.BackNoteRecordList),e.recordHome.on(Laya.Event.MOUSE_DOWN,e,e.OnMouseDown),e.recordHome.on(Laya.Event.MOUSE_UP,e,e.OnMouseUp),e}return __extends(e,t),e.prototype.OnMouseDown=function(){this.event("OnMouseDown")},e.prototype.OnMouseUp=function(){this.event("OnMouseUp")},e.prototype.ShowNoBetRecord=function(t){this.noBetData.visible=t},e.prototype.ShowNoteRecord=function(t){void 0===t&&(t=!1),this.recordBox.x=0,this.visible=!0,this._recordList.visible=t?!0:!1},e.prototype.CloseRecordHander=function(t){this.closeRecordHander=t},e.prototype.CloseNoteRecord=function(){this.visible=!1,this.dataArr=[],this.betDetailList.dataSource=this.dataArr,this.closeRecordHander.run()},e.prototype.GoNoteRecordDetail=function(t){Laya.Tween.to(this.recordBox,{x:-1e3},500,Laya.Ease.quadOut),this.betResult.text=this.BetResult(t.total.text),this.roundId.text=t.roundId.text,this.betResultData=t.gameData[t.gameData.length-1],this.GetBetResultPokerData(this.betResultData);for(var e=[],n=0;n<t.gameData.length-1;n++)e.push(t.gameData[n]);this.GetBetRecordDetail(e)},e.prototype.GetBetResultPokerData=function(t){var e=JSON.parse(t.Data);this.poker1.skin=this.GetPokerUrl(e.Cards.FirstCard),this.poker2.skin=this.GetPokerUrl(e.Cards.SecondCard),this.poker3.skin=this.GetPokerUrl(e.Cards.ThirdCard)},e.prototype.GetBetRecordDetail=function(t){for(var e=t.length,n=0;e>n;n++){var i={betNum:{text:n+1},detail:JSON.parse(t[n].Data)};this.dataArr.push(i)}this.betDetailList.vScrollBarSkin="",this.betDetailList.dataSource=this.dataArr,this.betDetailList.renderHandler=new Laya.Handler(this,this.onRender)},e.prototype.onRender=function(t,e){if(!(e>this.dataArr.length)){var n=this.dataArr[e],i=t.getChildByName("betNum"),o=t.getChildByName("betTypeList");i.text=n.betNum.text,o.hScrollBarSkin="",o.dataSource=n.detail,o.renderHandler=new Laya.Handler(this,function(t,e){if(!(e>n.detail.length)){var i=t.getChildByName("betPos"),o=t.getChildByName("betOdds"),r=t.getChildByName("betAmount");i.text=Utils.BetPos.transform(n.detail[e].BetPos),o.text=n.detail[e].Odds,r.text=n.detail[e].Amount}})}},e.prototype.BackNoteRecordList=function(){this.dataArr=[],this.betDetailList.dataSource=this.dataArr,Laya.Tween.to(this.recordBox,{x:0},500,Laya.Ease.quadOut)},e.prototype.BetResult=function(t){return t>0?"赢 + "+t:"输 - "+-t},e.prototype.GetPokerUrl=function(t){return"ui/poker/"+t+".png"},e}(ui.NoteRecordUI);t.NoteRecordPanel=e}(ScenePanel||(ScenePanel={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ScenePanel;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.closeBtn.on(Laya.Event.CLICK,e,e.CloseTip),e.visible=!1,GameConfig.RatioType?e.closeBtn.scale(GameConfig.HeightWidth,1):e.closeBtn.scale(1,GameConfig.WidthHeight),e}return __extends(e,t),e.prototype.ShowTip=function(){this.visible=!0},e.prototype.CloseTip=function(){this.visible=!1},e}(ui.TipsPanelUI);t.TipsPanel=e}(ScenePanel||(ScenePanel={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ScenePanel;!function(t){t.BetStatus={0:"等待开始",1:"正在投注",2:"结束投注",3:"游戏结算"};var e=function(e){function n(){var t=e.call(this)||this;return GameConfig.RatioType?t.round.scale(GameConfig.HeightWidth,1):t.round.scale(1,GameConfig.WidthHeight),t}return __extends(n,e),n.prototype.SetGameRound=function(t){this.gameRound.text=t},n.prototype.SetGameState=function(e){this.gameState.text=t.BetStatus[e]},n}(ui.RoundPanelUI);t.RoundPanel=e}(ScenePanel||(ScenePanel={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ScenePanel;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.cacheAs="bitmap",e.visible=!1,GameConfig.RatioType?e.prompt.scale(GameConfig.HeightWidth,1):e.prompt.scale(1,GameConfig.WidthHeight),e.close.on(Laya.Event.CLICK,e,e.CloseRule),e}return __extends(e,t),e.prototype.ShowRule=function(){this.visible=!0},e.prototype.CloseRule=function(){this.visible=!1,this.ClearTextureRes()},e.prototype.ClearTextureRes=function(){Laya.loader.clearTextureRes("ui/mask.png"),Laya.loader.clearTextureRes("ui/bg_record.png"),Laya.loader.clearTextureRes("ui/recordLine.png")},e}(ui.RulePanelUI);t.RulePanel=e}(ScenePanel||(ScenePanel={}));var TipsPanelCtrl=function(){function t(t){this.statedPanel=t}return t.prototype.Show=function(){this.statedPanel.ShowTip()},t}(),RoundPanelCtrl=function(){function t(t){this.statedPanel=t}return t.prototype.SetGameRound=function(t){this.statedPanel.SetGameRound(t)},t.prototype.SetGameState=function(t){this.statedPanel.SetGameState(t)},t}(),BetPanelCtrl=function(){function t(t,e,n,i){this.chip=5,this.lastBetPosMsg=new Object,this.currentBetPosMsg=new Array,this.currentOdds=new Object,this.sendBetPosMsg=new Object,this.currentBetSocre=0,this.handler=e,this.isClose=n,this.betPanel=t,this.betPanel.SetClickHandelr(Laya.Handler.create(this,this.BtnClickHandler,null,!1)),i&&i.Score&&(this.balance=Number(i.Score)),this.betPanel.DisabledAllBtn()}return t.prototype.SetOdds=function(t){this.currentOdds=t,this.betPanel.SetOdds(t)},t.prototype.GameInit=function(t){this.SetOdds(t.Odds),this.limitScore=t.Limit,t.Status!=BaseEnum.GameStatus.BET||this.isClose?(this.betPanel.GameResult(this.lastBetPosMsg,this.currentBetPosMsg,t.Limit),this.betPanel.SetBetting(!1)):(this.lastBetPosMsg=t.TotalBet,this.betPanel.GameInit(this.lastBetPosMsg,t.Limit),this.betPanel.SetBetting(!0),this.betPanel.SetBetBtn(!1))},t.prototype.GameStart=function(t){this.betPanel.ResetBetBtnLabel(),this.betPanel.SetBetting(!0),this.isClose||(this.betPanel.SetBetBtn(!1),this.SetOdds(t),Laya.timer.loop(5e3,this,this.ReSend))},t.prototype.BetAck=function(t){this.sendBetPosMsg[t]&&(this.sendBetPosMsg[t]=null)},t.prototype.BetResult=function(t){if(!this.isClose)if(t.Success)this.balance=t.Balance,this.lastBetPosMsg=t.TotalBet,this.betPanel.SetBetPos(this.lastBetPosMsg),this.betPanel.ShowMsg("投注成功");else{var e=new LanguageUtils.Language,n=e.GetLanguage(BaseEnum.BetErrorCode[t.ErrorCode],GameConfig.GameID);this.betPanel.ShowMsg(n),this.betPanel.SetBetPos(this.lastBetPosMsg)}},t.prototype.GameResult=function(){this.isClose||(this.betPanel.SetBetting(!1),this.betPanel.DisabledAllBtn(),this.sendBetPosMsg=new Object,this.betPanel.GameResult(this.lastBetPosMsg,this.currentBetPosMsg),this.currentBetPosMsg=new Array,this.currentBetSocre=0)},t.prototype.SettleResult=function(t){this.isClose||(this.balance=t.Balance,this.betPanel.SettleResult(t,this.lastBetPosMsg),this.lastBetPosMsg=new Object)},t.prototype.BtnClickHandler=function(t){switch(t.Type){case ScenePanel.ClickType.ODDS:this.BetPosType(t.Data);break;case ScenePanel.ClickType.BET:this.BetConfirm();break;case ScenePanel.ClickType.CANCEL:this.BetCancel();break;case ScenePanel.ClickType.CHIP:this.ChangeChip(t.Data)}},t.prototype.BetPosType=function(t){var e=this.currentBetPosMsg.length,n=!1;if(0!=this.currentOdds[t]){var i=0;this.lastBetPosMsg&&this.lastBetPosMsg.hasOwnProperty(t)&&(i+=this.lastBetPosMsg[t]);for(var o=0;e>o;o++)if(this.currentBetPosMsg[o].BetPos==t){n=!0;var r=this.currentBetPosMsg[o].Amount+this.chip;if(i+=r,this.limitScore.MinBet<=i&&i<=this.limitScore.MaxBet){var a=this.currentBetSocre+this.chip;if(a>this.balance)return this.betPanel.ShowMsg("余额不足"),this.currentBetPosMsg&&0!=this.currentBetPosMsg.length||this.betPanel.DisabledBetBtn(),void 0;this.currentBetSocre=a,this.currentBetPosMsg[o].Amount=r,this.betPanel.ChipsFly(t-1,i)}else if(i>this.limitScore.MaxBet){var s=this.limitScore.MaxBet-(i-this.chip);if(0>=s)return this.betPanel.ShowMsg("超过投注限额"),this.currentBetPosMsg&&0!=this.currentBetPosMsg.length||this.betPanel.DisabledBetBtn(),void 0;var a=this.currentBetSocre+s;if(a>this.balance)return this.betPanel.ShowMsg("余额不足"),this.currentBetPosMsg&&0!=this.currentBetPosMsg.length||this.betPanel.DisabledBetBtn(),void 0;this.currentBetSocre=a,this.currentBetPosMsg[o].Amount=this.limitScore.MaxBet,this.betPanel.ChipsFly(t-1,this.limitScore.MaxBet)}break}if(!n){var h=new Dto.BetDto;if(h.BetPos=t,i+=this.chip,this.limitScore.MinBet<=i&&i<=this.limitScore.MaxBet){var a=this.currentBetSocre+this.chip;if(a>this.balance)return this.betPanel.ShowMsg("余额不足"),this.currentBetPosMsg&&0!=this.currentBetPosMsg.length||this.betPanel.DisabledBetBtn(),void 0;this.currentBetSocre=a,h.Odds=this.currentOdds[t],h.Amount=this.chip,this.currentBetPosMsg.push(h),this.betPanel.ChipsFly(t-1,i)}else if(i>this.limitScore.MaxBet){var s=this.limitScore.MaxBet-(i-this.chip);if(0>=s)return this.betPanel.ShowMsg("超过投注限额"),this.currentBetPosMsg&&0!=this.currentBetPosMsg.length||this.betPanel.DisabledBetBtn(),void 0;var a=this.currentBetSocre+s;if(a>this.balance)return this.betPanel.ShowMsg("余额不足"),this.currentBetPosMsg&&0!=this.currentBetPosMsg.length||this.betPanel.DisabledBetBtn(),void 0;this.currentBetSocre=a,h.Amount=s,h.Odds=this.currentOdds[t],this.currentBetPosMsg.push(h),this.betPanel.ChipsFly(t-1,this.limitScore.MaxBet)}}this.currentBetPosMsg&&0!=this.currentBetPosMsg.length||this.betPanel.DisabledBetBtn()}},t.prototype.BetConfirm=function(){if(!this.isClose&&this.currentBetPosMsg&&0!==this.currentBetPosMsg.length){var t=new Dto.HandlerDto;t.MsgID=null,t.Data=this.currentBetPosMsg,this.handler.runWith(t)}},t.prototype.SetMsgID=function(t){var e=new Dto.SendBetDto;e.Time=(new Date).getTime(),e.Data=this.currentBetPosMsg,this.sendBetPosMsg[t]=e,this.currentBetPosMsg=new Array,this.currentBetSocre=0},t.prototype.BetCancel=function(){this.isClose||(this.currentBetPosMsg=new Array,this.currentBetSocre=0,this.betPanel.SetBetPos(this.lastBetPosMsg))},t.prototype.ChangeChip=function(t){this.isClose||(this.chip=t)},t.prototype.ReSend=function(){for(var t in this.sendBetPosMsg)if(this.sendBetPosMsg[t]&&this.sendBetPosMsg[t].Time){var e=new Dto.HandlerDto;e.MsgID=t,e.Data=this.sendBetPosMsg[t].Data,this.handler.runWith(e)}},t}(),__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),CardPanelCtrl=function(t){function e(e,n){var i=t.call(this)||this;return i.pokerNum=3,i.cardPanel=e,i.footBallPanel=n,i}return __extends(e,t),e.prototype.InitGame=function(t){this.dataCards=[t.FirstCard,t.SecondCard,t.ThirdCard];for(var e=0;e<this.pokerNum;e++)this.cardPanel.pokerCards[e].InitPoker(this.dataCards[e])},e.prototype.StartGame=function(t){this.dataCards=[t.FirstCard,t.SecondCard,null];for(var e=0;e<this.pokerNum;e++)this.cardPanel.pokerCards[e].ShowPoker(this.dataCards[e])},e.prototype.EndGame=function(t){var e=this;this.dataCards=[t.FirstCard,t.SecondCard,t.ThirdCard],this.cardPanel.pokerCards[2].StartFlipPoker(t.ThirdCard),Laya.timer.once(2e3,this,function(){for(var n=0;n<e.pokerNum;n++)e.cardPanel.pokerCards[n].HidePoker();e.endGameHander.runWith(t),e.FootBallAnimation(e.dataCards)})},e.prototype.EndGameHander=function(t){this.endGameHander=t},e.prototype.FootBallAnimation=function(t){var e=Utils.Poker.GetNumber(t[0]),n=Utils.Poker.GetNumber(t[1]),i=Utils.Poker.GetNumber(t[2]);(i>e&&n>i||e>i&&i>n)&&this.footBallPanel.ShootIn(),(e>i&&n>i&&(n>e||e==n)||i>e&&i>n&&e>n)&&this.footBallPanel.ShootLeft(),(i>e&&i>n&&(n>e||e==n)||e>i&&n>i&&e>n)&&this.footBallPanel.ShootRight(),i==e&&i==n&&this.footBallPanel.ShootGoalPost(2),i==e&&this.footBallPanel.ShootGoalPost(0),i==n&&this.footBallPanel.ShootGoalPost(1)
},e}(Laya.Sprite),__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),GameCtrl=function(t){function e(e){var n=t.call(this,GameConfig.GameID)||this;if(n.onClose=e,n.gameScenes=new ScenePanel.GameScenes,n.LoadingPanel=n.gameScenes.loadingPanel,n.LoadingPanel.ShowConnect(),n.RoundPanelCtrl=new RoundPanelCtrl(n.gameScenes.roundPanel),n.CardPanelCtrl=new CardPanelCtrl(n.gameScenes.cardPanel,n.gameScenes.footballPanel),n.CardPanelCtrl.EndGameHander(Laya.Handler.create(n,n.FlipEnd,null,!1)),n.BetCtrl=new BetPanelCtrl(n.gameScenes.betPanel,Laya.Handler.create(n,n.SendHandelr,null,!1),n.authorizationInfo.IsClose,n.memberInfo),n.HistoryPanelCtrl=new HistoryPanelCtrl(n.gameScenes.historyPanel),n.TimePanelCtrl=new TimePanelCtrl(n.gameScenes.timePanel),n.HeadPanelCtrl=new HeadPanelCtrl(n.gameScenes.headPanel,n.gameScenes.noteReocrdPanel,n.gameScenes.rulePanel,n.memberInfo,n.parentID,n.authorizationInfo.IsTourists),n.authorizationInfo.IsTourists){var i=new TipsPanelCtrl(n.gameScenes.tipsPanel);i.Show()}return n}return __extends(e,t),e.prototype.WeChatShareHandler=function(){},e.prototype.OnNoNetwork=function(){},e.prototype.OnConnectHandler=function(){console.log("侦听:Socket连接")},e.prototype.OnCloseHandler=function(){this.LoadingPanel.ShowConnect(),console.log("侦听:Socket关闭")},e.prototype.OnErrorHandler=function(){console.log("侦听:Socket错误")},e.prototype.OnWillReconnectHandler=function(){this.LoadingPanel.ShowConnect(),console.log("侦听:Socket重连")},e.prototype.OnLogoutHandler=function(){this.LoadingPanel.HideConnect(),console.log("侦听:登出")},e.prototype.OnAckHandler=function(t){console.log("侦听:Ack"),this.BetCtrl.BetAck(t)},e.prototype.OnSystemPushHandler=function(){},e.prototype.SendHandelr=function(t){var e=t.MsgID?t.MsgID:Utils.Guid.Create();this.BetCtrl.SetMsgID(e),this.Send(t.Data,e)},e.prototype.OnGameInit=function(t){this.LoadingPanel.HideConnect(),t&&t.RoundID&&this.RoundPanelCtrl.SetGameRound(t.RoundID),0==t.Status&&this.RoundPanelCtrl.SetGameState(0),1==t.Status&&t.BetTime>=0&&(this.TimePanelCtrl.StartGameTime(t.BetTime),this.RoundPanelCtrl.SetGameState(1)),t&&this.BetCtrl.GameInit(t),t&&t.Cards&&this.CardPanelCtrl.InitGame(t.Cards),t&&t.History&&this.HistoryPanelCtrl.SetHistoryData(t.History),t&&t.Balance&&this.HeadPanelCtrl.ChangeMoney(t.Balance),console.log("MSG:游戏初始化",t)},e.prototype.OnGameStart=function(t){t&&t.RoundID&&this.RoundPanelCtrl.SetGameRound(t.RoundID),this.RoundPanelCtrl.SetGameState(1),console.log("MSG:游戏开始",t),t&&t.Odds&&this.BetCtrl.GameStart(t.Odds),t&&t.BetTime&&this.TimePanelCtrl.StartGameTime(t.BetTime),this.CardPanelCtrl.StartGame(t)},e.prototype.OnBetResult=function(t){console.log("MSG:游戏投注结果",t),this.BetCtrl.BetResult(t),!this.authorizationInfo.IsClose&&t.Success&&this.HeadPanelCtrl.ChangeMoney(t.Balance)},e.prototype.OnStopBet=function(){Utils.BackgroundMusic.PlaySounds("sound/csz1.wav"),console.log("MSG:游戏停止投注")},e.prototype.OnGameResult=function(t){this.RoundPanelCtrl.SetGameState(2),console.log("MSG:游戏结束",t),this.BetCtrl.GameResult(),this.CardPanelCtrl.EndGame(t),this.TimePanelCtrl.EndGameTime()},e.prototype.FlipEnd=function(t){this.gameScenes.FlyPoker(t),this.HistoryPanelCtrl.AddHistoryList(t)},e.prototype.OnSettleResult=function(t){this.RoundPanelCtrl.SetGameState(3),console.log("MSG:游戏结算",t),this.BetCtrl.SettleResult(t),this.authorizationInfo.IsClose||this.HeadPanelCtrl.ChangeMoney(t.Balance)},e.prototype.OnGameOther=function(t){console.log("MSG:游戏其他信息",t)},e}(BaseCtrl),__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ScenePanel;!function(t){var e=function(e){function n(t){var n=e.call(this)||this;n.isLoginSuccess=!1,n.isLoadSuccess=!1,n.onGameLoadSuccess=t;var i=new ServiceManager.MemberManager(GameConfig.GameID),o=i.GetSocketInfo();if(o.SocketToken&&o.Token)n.isLoginSuccess=!0;else{var r=(Utils.Url.GetQuery("parentid"),new BaseDto.LoginDto);r.DeviceType=GameConfig.DeviceType,r.DeviceId=GameConfig.DeviceId;var a=Laya.Handler.create(n,n.LoginSuccess,null,!1),s=Laya.Handler.create(n,n.LoginError,null,!1);i.LoginByTourists(r,o.Token,a,s)}var h=Laya.Browser.window.location.href;return i.GetJsSignature(h,Laya.Handler.create(n,n.GetWeChatSuccess,null,!1)),n.onLoaded(),n}return __extends(n,e),n.prototype.GetWeChatSuccess=function(t){var e=new Utils.WeChat;e.Init(t)},n.prototype.LoginSuccess=function(){this.isLoginSuccess=!0,this.isLoadSuccess&&this.onGameLoadSuccess.run()},n.prototype.LoginError=function(t){this.gameLoadScenes.LoadError(t),this.isLoginSuccess=!0,this.isLoadSuccess&&this.onGameLoadSuccess.run()},n.prototype.onLoaded=function(){this.gameLoadScenes=new t.GameLoadScenes,Laya.stage.addChild(this.gameLoadScenes);var e=t.LoadResourcesConfig;Laya.loader.load(e,Laya.Handler.create(this,this.onLoadResource),Laya.Handler.create(this,this.onProgress,null,!1))},n.prototype.onProgress=function(t){this.gameLoadScenes.LoadProgress(t)},n.prototype.onLoadResource=function(){this.isLoadSuccess=!0,this.isLoginSuccess&&this.onGameLoadSuccess.run()},n}(Laya.Sprite);t.GameLoadCtrl=e}(ScenePanel||(ScenePanel={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),HeadPanelCtrl=function(t){function e(e,n,i,o,r,a){var s=t.call(this)||this;s.headPanel=e;var h=Laya.Handler.create(s,s.OnClickGR,null,!1),l=Laya.Handler.create(s,s.OnClickRule,null,!1);return s.headPanel.SetInfo(o,r,h,l,a),s.noteRecordPanelCtrl=new NoteRecordPanelCtrl(n),s.rulePanel=i,s}return __extends(e,t),e.prototype.OnClickGR=function(){this.noteRecordPanelCtrl.ShowNoteRecord()},e.prototype.OnClickRule=function(){this.rulePanel.ShowRule()},e.prototype.ChangeMoney=function(t){this.headPanel.ChangeMoney(t)},e}(Laya.Sprite),__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),HistoryPanelCtrl=function(t){function e(e){var n=t.call(this)||this;return n.index=0,n.historyPanel=e,n}return __extends(e,t),e.prototype.GetPokerUrl=function(t){return"ui/poker/"+t+".png"},e.prototype.SetHistoryData=function(t){if(this.listArr=[],!t)return this.historyPanel.listPanel.visible=!1,void 0;this.historyPanel.listPanel.visible=!0,this.index=t.length;for(var e=0;e<this.index;e++){var n={poker0:{skin:this.GetPokerUrl(t[e].FirstCard)},poker1:{skin:this.GetPokerUrl(t[e].SecondCard)},poker2:{skin:this.GetPokerUrl(t[e].ThirdCard)}};this.listArr.unshift(n)}this.historyPanel._list.array=this.listArr,this.historyPanel._list.renderHandler=new Laya.Handler(this,this.onRender)},e.prototype.onRender=function(t,e){if(!(e>this.listArr.length)){var n=this.listArr[e],i=t.getChildByName("poker0"),o=t.getChildByName("poker1"),r=t.getChildByName("poker2");i.skin=n.poker0.skin,o.skin=n.poker1.skin,r.skin=n.poker2.skin}},e.prototype.AddHistoryList=function(t){var e=this;this.historyPanel.ScrollHistoryList(Laya.Handler.create(this,function(){var n={poker0:{skin:e.GetPokerUrl(t.FirstCard)},poker1:{skin:e.GetPokerUrl(t.SecondCard)},poker2:{skin:e.GetPokerUrl(t.ThirdCard)}};e.listArr.unshift(n),e.historyPanel._list.array=e.listArr}))},e}(Laya.Sprite),__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),LoadingrPanelCtrl=function(t){function e(e){var n=t.call(this)||this;return n.onClose=e,n}return __extends(e,t),e}(Laya.Sprite),__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),NoteRecordPanelCtrl=function(t){function e(e){var n=t.call(this)||this;return n.noMoreData=!1,n.isActiveData=!0,n.scrollValue=0,n.noteRecordPanel=e,n.betRecordPageDto=new Dto.BetRecordPageDto,n.betRecordPageDto.GameId=GameConfig.GameID,n.betRecordPageDto.PageSize=10,n.noteRecordPanel.on("OnMouseDown",n,n.OnMouseDown),n.noteRecordPanel.on("OnMouseUp",n,n.OnMouseUp),n.noteRecordPanel.CloseRecordHander(new Laya.Handler(n,n.CloseNoteRecord)),n}return __extends(e,t),e.prototype.OnMouseDown=function(){this.mouseDownY=this.mouseY},e.prototype.OnMouseUp=function(){0==this.scrollValue&&this.mouseY-this.mouseDownY>100&&this.DownRefresh(),this.noMoreData||this.scrollValue>=this.dataArr.length*this.listBoxH-this.recordListH&&this.mouseDownY-this.mouseY>100&&this.UpLoading()},e.prototype.ShowNoteRecord=function(){this.DownRefresh(),this.noteRecordPanel._recordList.vScrollBarSkin=""},e.prototype.CloseNoteRecord=function(){this.dataArr=[],this.noteRecordPanel._recordList.dataSource=this.dataArr,this.ClearTextureRes()},e.prototype.ClearTextureRes=function(){Laya.loader.clearTextureRes("ui/mask.png"),Laya.loader.clearTextureRes("ui/bg_record.png"),Laya.loader.clearTextureRes("ui/recordLine.png")},e.prototype.GetNoteRecordData=function(t){this.noteRecordPanel.ShowNoteRecord(!0),this.listArr=[],this.index=t.length;for(var e=0;e<this.index;e++){var n={betTime:{text:Utils.Time.transform(t[e].BetTime,1)},betDate:{text:Utils.Time.transform(t[e].BetTime,0)},roundId:{text:t[e].RoundId},gameData:t[e].GameData,total:{text:t[e].Total}};this.listArr.push(n)}this.dataArr=this.dataArr.concat(this.listArr),this.noteRecordPanel._recordList.array=this.dataArr,this.noteRecordPanel._recordList.renderHandler=new Laya.Handler(this,this.onRender),this.noteRecordPanel._recordList.mouseHandler=new Laya.Handler(this,this.onMouse)},e.prototype.Success=function(t){for(var e=t.Data,n=0;n<e.length;n++)e[n].GameData=JSON.parse(e[n].GameData);return e&&0!=e.length?(this.isActiveData&&this.noteRecordPanel.ShowNoBetRecord(!1),this.GetNoteRecordData(e),this.betRecordPageDto.LastId=e[e.length-1].Id,void 0):(this.isActiveData&&this.noteRecordPanel.ShowNoBetRecord(!0),this.noMoreData=!0,void 0)},e.prototype.Error=function(){},e.prototype.UpLoading=function(){this.isActiveData=!1,Net.WebApi.GetInstance().GetBetRecord(this.betRecordPageDto,Laya.Handler.create(this,this.Success,null,!1),Laya.Handler.create(this,this.Error,null,!1))},e.prototype.DownRefresh=function(){this.betRecordPageDto.LastId=null,this.noMoreData=!1,this.isActiveData=!0,this.dataArr=[],this.noteRecordPanel.ShowNoteRecord(!1),Net.WebApi.GetInstance().GetBetRecord(this.betRecordPageDto,Laya.Handler.create(this,this.Success,null,!1),Laya.Handler.create(this,this.Error,null,!1))},e.prototype.onRender=function(t,e){if(!(e>this.dataArr.length)){var n=this.dataArr[e];this.listBoxH=t.height,this.recordListH=this.noteRecordPanel._recordList.height;var i=t.getChildByName("betTime"),o=t.getChildByName("betDate"),r=t.getChildByName("roundId"),a=t.getChildByName("total");i.text=n.betTime.text,o.text=n.betDate.text,r.text=n.roundId.text,a.text=n.total.text}},e.prototype.onMouse=function(t,e){if(this.scrollValue=this.noteRecordPanel._recordList.scrollBar.value,t.type==Laya.Event.CLICK){var n=this.dataArr[e];this.noteRecordPanel.GoNoteRecordDetail(n)}},e}(Laya.Sprite),__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),PromptPanelCtrl=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(Laya.Sprite),__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),TimePanelCtrl=function(t){function e(e){var n=t.call(this)||this;return n.timePanel=e,n}return __extends(e,t),e.prototype.StartGameTime=function(t){this.timePanel.timeEffect.StartGameTime(t),this.timePanel.visible=!0},e.prototype.EndGameTime=function(){this.timePanel.timeEffect.EndGameTime(),this.timePanel.visible=!1,Utils.BackgroundMusic.PlaySounds("sound/csz1.wav")},e}(Laya.Sprite),GameMain=function(){function t(){new InitState,new ScenePanel.GameLoadCtrl(Laya.Handler.create(this,this.onGameLoadSuccess))}return t.prototype.onGameLoadSuccess=function(){this.GameCtrl=new GameCtrl(Laya.Handler.create(this,this.onGameLoadSuccess))},t}(),gameMain=new GameMain;